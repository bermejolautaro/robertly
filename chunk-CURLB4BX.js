import{A as p,Bb as g,G as y,Hb as b,I,Ib as F,J as T,Ka as k,O as S,Ua as M,gd as H,hd as q,ja as c,ka as d,l as f,lc as N,pc as m,qc as w,rb as $,rc as C,sb as _,tb as v,ub as D,yd as E,zb as V,zd as Q}from"./chunk-DCXKOQXA.js";var A=["typeaheadInput"],L=["typeaheadInstance"],X=(()=>{let o=class o{constructor(){this.typeaheadInputHtml=w.required("typeaheadInput"),this.typeaheadInstance=w.required("typeaheadInstance"),this.disabled=m(!1),this.items=m.required(),this.control=C(),this.value=C(),this.itemSelector=m(n=>`${n??""}`),this.placeholder=m("Placeholder"),this.focus$=new f,this.click$=new f,this.search=null,this.setup_effect_update_native_element_on_form_change()}setup_effect_update_native_element_on_form_change(){N(()=>{let n=this.control(),t=this.value(),e=this.typeaheadInputHtml();e&&(e.nativeElement.value=this.itemSelector()(n?.value??t??null))})}ngOnInit(){this.search=j(this.focus$,this.click$,this.typeaheadInstance(),this.items,this.itemSelector())}clear(){let n=this.typeaheadInputHtml();this.control.update(t=>(t?.reset(),t)),this.value.set(null),n&&(n.nativeElement.value="")}onSelectItem(n){this.control.update(t=>(t?.patchValue(n.item),t)),this.value.set(n.item)}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=M({type:o,selectors:[["app-typeahead"]],viewQuery:function(t,e){t&1&&(b(e.typeaheadInputHtml,A,5),b(e.typeaheadInstance,L,5)),t&2&&F(2)},inputs:{disabled:[1,"disabled"],items:[1,"items"],control:[1,"control"],value:[1,"value"],itemSelector:[1,"itemSelector"],placeholder:[1,"placeholder"]},outputs:{control:"controlChange",value:"valueChange"},decls:6,vars:6,consts:[["typeaheadInput","","typeaheadInstance","ngbTypeahead"],[1,"input-group"],["type","text",1,"form-control",3,"selectItem","focus","click","placeholder","ngbTypeahead","popupClass","resultFormatter","inputFormatter","disabled"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-times"]],template:function(t,e){if(t&1){let l=V();_(0,"div",1)(1,"input",2,0),g("selectItem",function(a){return c(l),d(e.onSelectItem(a))})("focus",function(){let a;return c(l),d(e.focus$.next(((a=e.control())==null?null:a.value)??null))})("click",function(){let a;return c(l),d(e.click$.next(((a=e.control())==null?null:a.value)??null))}),v(),_(4,"button",3),g("click",function(){return c(l),d(e.clear())}),D(5,"i",4),v()()}if(t&2){let l;k(),$("placeholder",e.placeholder())("ngbTypeahead",e.search)("popupClass","typeahead")("resultFormatter",e.itemSelector())("inputFormatter",e.itemSelector())("disabled",e.disabled()||((l=e.control())==null?null:l.disabled))}},dependencies:[q,H,Q,E],styles:["[_nghost-%COMP%]{display:block;width:100%}"],changeDetection:0});let s=o;return s})();function j(s,o,O,n,t){return e=>{let l=e.pipe(S()),u=s.pipe(p(i=>({type:"focus",value:t(i)}))),a=o.pipe(p(i=>({type:"click",value:t(i)}))),P=y(u,a).pipe(T(50),I(i=>!!i.length),p(i=>i.map(r=>r.type).includes("focus")&&i.map(r=>r.type).includes("click")?"":i.map(r=>r.type).includes("click")?O.isPopupOpen()?null:"":null));return y(l,P).pipe(p(i=>{let r=n();return i===null?[]:i?r.filter(h=>!!h).filter(h=>t(h).toLowerCase().includes(i.toLowerCase())):r}))}}export{X as a};
