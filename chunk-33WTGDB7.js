import{a as V}from"./chunk-WUEYTSPZ.js";import{B as z,e as k,p as b}from"./chunk-MQVGECFW.js";import{d as O,n as E}from"./chunk-SL3BKGXR.js";import{Aa as D,Ab as v,Bb as h,Cb as P,Db as U,Hb as S,Ic as s,Jb as w,Kb as M,La as L,Lb as o,Lc as A,Mb as l,Nb as u,Ub as C,cb as a,dc as c,fc as g,kb as f,qa as _,sc as W,ub as d,vc as T}from"./chunk-HLRLCPE5.js";var F=(()=>{class i{constructor(){this.value=L(0),this.maxValue=L(1),this.count=d(0),this.percent=s(()=>Math.min(100,this.value()*100/this.maxValue())),this.isSuccess=s(()=>this.percent()>=80),this.isAverage=s(()=>this.percent()>=50&&this.percent()<80),this.isDanger=s(()=>this.percent()>0&&this.percent()<50),this.size=d(100),this.strokeWidth=d(7),this.radius=s(()=>this.size()/2-this.strokeWidth()*2),this.circumference=s(()=>this.radius()*2*Math.PI),this.strokeDashOffset=d(this.circumference()),this.transition=d("none"),this.strokeDashArray=s(()=>{let t=this.circumference();return`${t} ${t}`}),this.#e=A(()=>{let t=this.percent(),n=this.circumference(),e=n-t/100*n,r=1500;setTimeout(()=>{this.transition.set(`stroke-dashoffset ${r}ms`),this.strokeDashOffset.set(e),this.animateCountUp(this.value(),r)},1e3)})}animateCountUp(t,n=2e3){let e=this.count(),r=performance.now(),p=m=>{let I=m-r,H=R=>R*(2-R),x=Math.min(I/n,1),$=H(x),B=Math.round(e+(t-e)*$);this.count.set(B),x<1?requestAnimationFrame(p):this.count.set(t)};requestAnimationFrame(p)}ngOnInit(){this.transition.set("none"),this.strokeDashOffset.set(this.circumference())}#e;static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=f({type:i,selectors:[["app-ring"]],inputs:{value:[1,"value"],maxValue:[1,"maxValue"]},decls:5,vars:21,consts:[[1,"progress-ring"],["x","50%","y","52%","fill","white",1,"progress-ring__text"],["fill","transparent","stroke","",1,"progress-ring__circle","default"],["fill","transparent",1,"progress-ring__circle"]],template:function(n,e){n&1&&(D(),o(0,"svg",0)(1,"text",1),c(2),l(),u(3,"circle",2)(4,"circle",3),l()),n&2&&(v("height",e.size())("width",e.size()),a(2),g(" ",e.count()," "),a(),v("stroke-width",e.strokeWidth())("r",e.radius())("cx",e.size()/2)("cy",e.size()/2),a(),P("transition",e.transition()),U("success",e.isSuccess())("average",e.isAverage())("danger",e.isDanger()),v("stroke-width",e.strokeWidth())("stroke-dasharray",e.strokeDashArray())("stroke-dashoffset",e.strokeDashOffset())("r",e.radius())("cx",e.size()/2)("cy",e.size()/2))},styles:[".progress-ring__text[_ngcontent-%COMP%]{font-size:24px;font-weight:700;transform-origin:50% 50%;text-anchor:middle;dominant-baseline:middle}.progress-ring__circle[_ngcontent-%COMP%]{transform:rotate(-90deg);transform-origin:50% 50%;stroke:var(--light-bg)}.success[_ngcontent-%COMP%]{stroke:#27bb65}.average[_ngcontent-%COMP%]{stroke:#fdcd00}.danger[_ngcontent-%COMP%]{stroke:#c33e37}"],changeDetection:0})}}return i})();function q(i,y){if(i&1&&u(0,"app-exercise-log",7),i&2){let t=y.$implicit;h("exerciseLog",t)}}function G(i,y){if(i&1&&u(0,"app-exercise-log",7),i&2){let t=y.$implicit;h("exerciseLog",t)}}var re=(()=>{class i{constructor(){this.document=_(O),this.exerciseLogApiService=_(b),this.daysPerWeekTarget=s(()=>4),this.showMoreRecentlyUpdated=d(!1),this.recentlyUpdatedAmountToShow=s(()=>this.showMoreRecentlyUpdated()?this.recentlyUpdatedLogsResource.value()?.length??10:2),this.showMoreLatestWorkout=d(!1),this.latestWorkoutAmountToShow=s(()=>this.showMoreLatestWorkout()?this.latestWorkoutLogsResource.value()?.length??10:2),this.isLoading=s(()=>this.recentlyUpdatedLogsResource.isLoading()&&this.latestWorkoutLogsResource.isLoading()&&this.stats.isLoading()),this.stats=k({loader:()=>this.exerciseLogApiService.getStats()}),this.recentlyUpdatedLogsResource=k({loader:()=>this.exerciseLogApiService.getRecentlyUpdated()}),this.latestWorkoutLogsResource=k({loader:()=>this.exerciseLogApiService.getExerciseLogsLatestWorkout()}),this.recentlyUpdatedLogs=s(()=>this.recentlyUpdatedLogsResource.isLoading()?[null,null]:this.recentlyUpdatedLogsResource.value()),this.latestWorkoutLogs=s(()=>this.latestWorkoutLogsResource.isLoading()?[null,null]:this.latestWorkoutLogsResource.value())}ngOnInit(){this.document.defaultView?.scroll({top:0,left:0,behavior:"smooth"})}toggleShowMoreRecentlyUpdated(){this.showMoreRecentlyUpdated.update(t=>!t)}toggleShowMoreLatestWorkout(){this.showMoreLatestWorkout.update(t=>!t)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=f({type:i,selectors:[["app-home-page"]],decls:31,vars:16,consts:[[1,"footer-padding"],[1,"container"],[1,"pb-3",2,"display","grid","grid-template-columns","1fr 1fr 1fr"],[1,"d-flex","justify-content-center","align-items-center","flex-column"],[3,"value","maxValue"],[2,"text-align","center","font-size","12px","padding","0.5rem"],[1,"pb-2"],[3,"exerciseLog"],[2,"font-size","14px","padding","0 0.4rem",3,"click"],[1,"pt-4","pb-2"]],template:function(n,e){if(n&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),u(4,"app-ring",4),o(5,"div",5),c(6,"Dias entrenados esta semana"),l()(),o(7,"div",3),u(8,"app-ring",4),o(9,"div",5),c(10,"Dias entrenados este mes"),l()(),o(11,"div",3),u(12,"app-ring",4),o(13,"div",5),c(14,"Dias entrenados este a\xF1o"),l()()(),o(15,"div",6)(16,"h6"),c(17,"Recently updated"),l()(),w(18,q,1,1,"app-exercise-log",7,S),W(20,"slice"),o(21,"div",8),C("click",function(){return e.toggleShowMoreRecentlyUpdated()}),c(22),l(),o(23,"div",9)(24,"h6"),c(25,"Latest Workout"),l()(),w(26,G,1,1,"app-exercise-log",7,S),W(28,"slice"),o(29,"div",8),C("click",function(){return e.toggleShowMoreLatestWorkout()}),c(30),l()()()),n&2){let r,p,m;a(4),h("value",(r=(r=e.stats.value())==null?null:r.daysTrainedThisWeek)!==null&&r!==void 0?r:0)("maxValue",e.daysPerWeekTarget()*1),a(4),h("value",(p=(p=e.stats.value())==null?null:p.daysTrainedThisMonth)!==null&&p!==void 0?p:0)("maxValue",e.daysPerWeekTarget()*4),a(4),h("value",(m=(m=e.stats.value())==null?null:m.daysTrainedThisYear)!==null&&m!==void 0?m:0)("maxValue",e.daysPerWeekTarget()*52),a(6),M(T(20,8,e.recentlyUpdatedLogs(),0,e.recentlyUpdatedAmountToShow())),a(4),g(" ",e.showMoreRecentlyUpdated()?"Show less...":"Show more..."," "),a(4),M(T(28,12,e.latestWorkoutLogs(),0,e.latestWorkoutAmountToShow())),a(4),g(" ",e.showMoreLatestWorkout()?"Show less...":"Show more..."," ")}},dependencies:[z,V,F,E],encapsulation:2,changeDetection:0})}}return i})();export{re as HomePageComponent};
