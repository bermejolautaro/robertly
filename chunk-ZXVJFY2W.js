import{a as z}from"./chunk-Z6GQMI5D.js";import{a as J}from"./chunk-AVKJFDUF.js";import{a as R}from"./chunk-Q3XQV3XW.js";import{C as L,I as N,U,f as O,m as $}from"./chunk-MTIUFNFO.js";import{d as F,j as W}from"./chunk-VKLU7C4A.js";import{Ab as u,Cb as E,Fb as T,Gb as g,Gc as h,Hb as P,Ib as C,Ic as A,Jb as n,Kb as o,Lb as v,Sb as w,Tb as G,a as f,b as S,bb as i,cc as c,ec as x,jb as D,pa as _,pc as M,qc as y,tb as b,yb as Y}from"./chunk-LRWZ4U2F.js";function H(t,p){if(t&1&&(n(0,"div",6),v(1,"app-ring",7),n(2,"div",8),c(3),M(4,"titlecase"),o()()),t&2){let e=p.$implicit;i(),u("value",e.totalSeries)("maxValue",10*1),i(2),x(" ",y(4,3,e.muscleGroup)," ")}}function K(t,p){if(t&1&&(n(0,"div",5),P(1,H,5,5,"div",6,g),o()),t&2){let e=G();i(),C(e.seriesPerWeek())}}function Q(t,p){if(t&1&&(n(0,"div",6),v(1,"app-ring",7),n(2,"div",8),c(3),M(4,"titlecase"),o()()),t&2){let e=p.$implicit;i(),u("value",e.totalSeries)("maxValue",10*4),i(2),x(" ",y(4,3,e.muscleGroup)," ")}}function X(t,p){if(t&1&&(n(0,"div",6),v(1,"app-ring",7),n(2,"div",8),c(3),M(4,"titlecase"),o()()),t&2){let e=p.$implicit;i(),u("value",e.totalSeries)("maxValue",10*4),i(2),x(" ",y(4,3,e.muscleGroup)," ")}}function Z(t,p){if(t&1&&(n(0,"div",9),c(1,"Current Month"),o(),n(2,"div",5),P(3,Q,5,5,"div",6,g),o(),n(5,"div",9),c(6,"Previous Month"),o(),n(7,"div",5),P(8,X,5,5,"div",6,g),o()),t&2){let e=G();i(3),C(e.seriesPerMonth()),i(5),C(e.seriesPerPreviousMonth())}}function ee(t,p){if(t&1&&(n(0,"div",6),v(1,"app-ring",7),n(2,"div",8),c(3),M(4,"titlecase"),o()()),t&2){let e=p.$implicit;i(),u("value",e.totalSeries)("maxValue",10*52),i(2),x(" ",y(4,3,e.muscleGroup)," ")}}function te(t,p){if(t&1&&(n(0,"div",5),P(1,ee,5,5,"div",6,g),o()),t&2){let e=G();i(),C(e.seriesPerYear())}}var he=(()=>{class t{constructor(){this.document=_(F),this.dayjs=_(U),this.exercisesApiService=_(N),this.exerciseLogApiService=_(R),this.defaultValues=h(()=>this.exercisesApiService.muscleGroups().map(e=>({totalSeries:0,muscleGroup:e??"",firstDateInPeriod:"",month:0,week:0,year:0}))),this.period=b("week"),this.seriesPerWeek=h(this.defaultValues),this.seriesPerMonth=h(this.defaultValues),this.seriesPerPreviousMonth=h(this.defaultValues),this.seriesPerYear=h(this.defaultValues),this.selectedOptionControl=b(new $("Series Per Muscle")),this.options=b(["Series Per Muscle","Exercise","Tonnage"]),this.seriesPerMuscle=O({loader:()=>this.exerciseLogApiService.getSeriesPerMuscle()}),this.#e=A(()=>{let e=this.seriesPerMuscle.value();if(e){let d=this.dayjs().year(),s=this.dayjs().month()+1,k=this.dayjs().week(),q=this.dayjs().add(-1,"month").month()+1,V=e.seriesPerMuscleWeekly.filter(r=>r.week===k&&r.year===d),I=e.seriesPerMuscleMonthly.filter(r=>r.month===s&&r.year===d),j=e.seriesPerMuscleMonthly.filter(r=>r.month===q&&r.year===d),B=e.seriesPerMuscleYearly.filter(r=>r.year===d);V.length&&this.seriesPerWeek.update(r=>r.map(a=>{let l=V.find(m=>m.muscleGroup===a.muscleGroup);return l?S(f({},a),{totalSeries:l?.totalSeries??0}):a})),I.length&&this.seriesPerMonth.update(r=>r.map(a=>{let l=I.find(m=>m.muscleGroup===a.muscleGroup);return l?S(f({},a),{totalSeries:l?.totalSeries??0}):a})),j.length&&this.seriesPerPreviousMonth.update(r=>r.map(a=>{let l=j.find(m=>m.muscleGroup===a.muscleGroup);return l?S(f({},a),{totalSeries:l?.totalSeries??0}):a})),B&&this.seriesPerYear.update(r=>r.map(a=>{let l=B.find(m=>m.muscleGroup===a.muscleGroup);return l?S(f({},a),{totalSeries:l?.totalSeries??0}):a}))}})}#e;ngOnInit(){this.document.defaultView?.scroll({top:0,left:0,behavior:"smooth"})}static{this.\u0275fac=function(d){return new(d||t)}}static{this.\u0275cmp=D({type:t,selectors:[["app-stats-page"]],decls:14,vars:12,consts:[[1,"header-footer-padding"],[1,"container"],[1,"pb-4"],[3,"control","items","showClear"],[1,"btn","me-1","badge","rounded-pill","chip",3,"click"],[1,"d-flex","flex-wrap","justify-content-around","align-items-center"],[1,"d-flex","justify-content-center","align-items-center","flex-column"],[3,"value","maxValue"],[2,"text-align","center","font-size","12px","padding","0.5rem"],[1,"mt-3"]],template:function(d,s){d&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),v(3,"app-dropdown",3),o(),n(4,"div",2)(5,"button",4),w("click",function(){return s.period.set("week")}),c(6," Week "),o(),n(7,"button",4),w("click",function(){return s.period.set("month")}),c(8," Month "),o(),n(9,"button",4),w("click",function(){return s.period.set("year")}),c(10," Year "),o()(),Y(11,K,3,0,"div",5)(12,Z,10,0)(13,te,3,0,"div",5),o()()),d&2&&(i(3),u("control",s.selectedOptionControl())("items",s.options())("showClear",!1),i(2),E("active",s.period()==="week"),i(2),E("active",s.period()==="month"),i(2),E("active",s.period()==="year"),i(2),T(s.period()==="week"?11:-1),i(),T(s.period()==="month"?12:-1),i(),T(s.period()==="year"?13:-1))},dependencies:[L,z,W,J],styles:[".badge.chip[_ngcontent-%COMP%]{font-size:16px;font-weight:400}.badge.chip.active[_ngcontent-%COMP%]{--bs-btn-active-border-color: transparent;--bs-btn-active-bg: var(--primary) }"],changeDetection:0})}}return t})();export{he as StatsPageComponent};
