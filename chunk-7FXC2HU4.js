import{B as p,e as b,r as W,s as A}from"./chunk-EQNXLAES.js";import{f as k,h as V,m as E,p as L,q as T}from"./chunk-6EYGD3XX.js";import{Bb as x,Fb as o,Gb as r,Hb as v,Ka as y,Kb as M,Mb as u,Nb as s,Ya as d,Yb as m,Zc as I,ac as h,bc as f,cc as _,ib as C,ma as g,nb as w,ua as l,va as c,y as S}from"./chunk-ARLDQED4.js";function D(i,O){if(i&1){let t=M();o(0,"div",2)(1,"button",3),u("click",function(){l(t);let e=s();return c(e.onClickSignInWithGoogle())}),v(2,"img",4),o(3,"span"),m(4,"Sign In with Google"),r()()(),o(5,"div",5)(6,"div",6)(7,"input",7),_("ngModelChange",function(e){l(t);let a=s();return f(a.email,e)||(a.email=e),c(e)}),r()(),o(8,"div",8)(9,"input",9),_("ngModelChange",function(e){l(t);let a=s();return f(a.password,e)||(a.password=e),c(e)}),r()(),o(10,"div",10)(11,"button",11),u("click",function(){l(t);let e=s();return c(e.onClickSignIn())}),m(12," Sign In "),r()()()}if(i&2){let t=s();d(7),h("ngModel",t.email),d(2),h("ngModel",t.password)}}function P(i,O){i&1&&(o(0,"div",1)(1,"div",12)(2,"span",13),m(3,"Loading..."),r()()())}var U=(()=>{class i{constructor(){this.authApiService=g(A),this.toastService=g(W),this.router=g(b),this.isLoading=y(!1),this.email="",this.password=""}async ngOnInit(){await this.authApiService.tryRefreshToken().then(t=>{t&&this.router.navigate([p.HOME])})}async onClickSignIn(){if(!(!this.email||!this.password)){try{this.isLoading.set(!0),await S(this.authApiService.signIn({email:this.email,password:this.password})),this.router.navigate([p.HOME])}catch{this.toastService.error("Sign in with email failed.")}this.isLoading.set(!1)}}async onClickSignInWithGoogle(){try{this.isLoading.set(!0),await this.authApiService.signInWithGoogle(),this.router.navigate([p.HOME])}catch{this.toastService.error("Sign in with google failed.")}this.isLoading.set(!1)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=C({type:i,selectors:[["app-signin"]],decls:3,vars:1,consts:[[1,"container","my-3"],[1,"position-absolute","top-50","start-50","translate-middle"],[1,"d-flex","justify-content-center","mt-2"],["type","button",1,"btn","btn-light","w-100","sign-in-google",3,"click"],["width","32","height","32","ngSrc","assets/icons/google-sign-in.png"],[1,"my-3"],[1,"input-group"],["type","text","placeholder","Email",1,"form-control",3,"ngModelChange","ngModel"],[1,"input-group","my-1"],["type","password","placeholder","Password",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-end","my-2"],["type","button",1,"btn","btn-primary","me-2",3,"click"],["role","status",1,"robertly-spinner","spinner-border","text-primary"],[1,"visually-hidden"]],template:function(n,e){n&1&&(o(0,"div",0),w(1,D,13,2)(2,P,4,0,"div",1),r()),n&2&&(d(),x(e.isLoading()?2:1))},dependencies:[L,k,V,E,T,I],styles:[".sign-in-google[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border:1px solid rgb(226,232,240);background-color:#fff;gap:5px}"],changeDetection:0})}}return i})();export{U as SignInComponent};
