import{a as O}from"./chunk-B64AY7BL.js";import{A as D,B as q,C as I,J as j,K as R,X as B,o as G,q as P,r as h,s as L,t as M,u as N,v as $,w as v,y as U}from"./chunk-XKYEPMQN.js";import{j as T}from"./chunk-MYBBF3QI.js";import{Ab as x,Ib as S,Jb as F,Kb as r,Lb as o,Mb as a,Pb as f,Tb as m,Ub as g,bb as s,bc as b,cc as p,dc as w,jb as y,oc as V,pc as k,qa as _,sc as A,ya as c,yb as C,za as l}from"./chunk-26H5WKEY.js";var H=(n,d)=>d.exerciseId;function J(n,d){if(n&1){let e=f();r(0,"div",9)(1,"h4",10),p(2," Edit Exercise "),o(),r(3,"button",11),m("click",function(){let i=c(e).$implicit;return l(i.dismiss())}),o()(),r(4,"div",12)(5,"form")(6,"div",13),a(7,"input",14),o(),r(8,"div",13),a(9,"app-typeahead",15),o(),r(10,"div",13),a(11,"app-typeahead",16),o()()(),r(12,"div",17)(13,"button",18),m("click",function(){let i=c(e).$implicit;return l(i.close())}),p(14," Save "),o()()}if(n&2){let e=g();s(7),x("formControl",e.exerciseForm.controls.name),s(2),x("control",e.exerciseForm.controls.muscleGroup)("items",e.exerciseLogService.muscleGroups()),s(2),x("control",e.exerciseForm.controls.type)("items",e.exerciseLogService.types()),s(2),x("disabled",e.exerciseForm.invalid||e.exerciseForm.pristine)}}function K(n,d){if(n&1){let e=f();r(0,"li",19),m("click",function(){let i=c(e).$implicit,u=g(),E=b(1);return l(u.open(E,i))}),r(1,"span"),p(2),V(3,"titlecase"),o(),r(4,"button",20),m("click",function(i){let u=c(e).$implicit;return g().deleteExercise(u),l(i.stopPropagation())}),a(5,"i",21),o()()}if(n&2){let e=d.$implicit;s(2),w(k(3,1,e.name))}}function Q(n,d){n&1&&(r(0,"div",8)(1,"div",22)(2,"span",23),p(3,"Loading..."),o()()())}var ce=(()=>{class n{constructor(){this.modalService=_(j),this.exerciseLogService=_(G),this.exerciseApiService=_(B),this.exerciseForm=new N({name:new v("",[h.required]),muscleGroup:new v("",[h.required]),type:new v("",[h.required])}),this.isUpdate=!1,this.exerciseForm.controls.name.valueChanges.subscribe(e=>{this.exerciseForm.controls.name.patchValue(e?.toLowerCase()??"",{emitEvent:!1})})}ngOnInit(){this.fetchAndUpdateExercises()}open(e,t){this.exerciseForm.reset(),t&&this.exerciseForm.patchValue({name:t.name,muscleGroup:t.muscleGroup,type:t.type}),this.modalService.open(e,{centered:!0}).result.then(()=>{if(this.isUpdate=!!t,t){let i={id:t.exerciseId,name:this.exerciseForm.value.name.toLowerCase(),muscleGroup:this.exerciseForm.value.muscleGroup,type:this.exerciseForm.value.type};this.exerciseApiService.updateExercise(i).subscribe({next:()=>this.fetchAndUpdateExercises()})}else{let i={name:this.exerciseForm.value.name.toLowerCase(),muscleGroup:this.exerciseForm.value.muscleGroup,type:this.exerciseForm.value.type};this.exerciseApiService.createExercise(i).subscribe({next:()=>this.fetchAndUpdateExercises()})}},()=>{})}close(e){e.close()}deleteExercise(e){this.exerciseApiService.deleteExercise(e.exerciseId).subscribe({next:()=>this.fetchAndUpdateExercises()})}fetchAndUpdateExercises(){this.exerciseLogService.updateExercises$.next([]),this.exerciseApiService.getExercises().subscribe(e=>{this.exerciseLogService.updateExercises$.next(e)})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=y({type:n,selectors:[["app-exercises-page"]],decls:12,vars:1,consts:[["content",""],[1,"container","footer-padding"],[1,"d-flex","justify-content-end","mb-3"],["type","button",1,"btn","btn-primary"],[1,"fa","fa-plus","me-2"],[3,"click"],[1,"list-group"],[1,"list-group-item","d-flex","align-items-center"],[1,"position-absolute","top-50","start-50","translate-middle"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],["type","text","placeholder","Name",1,"form-control",3,"formControl"],["placeholder","Muscle Group",3,"control","items"],["placeholder","Type",3,"control","items"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"list-group-item","d-flex","align-items-center",3,"click"],["type","button",1,"btn","btn-danger",2,"margin-left","auto","padding","0.075rem 0.35rem",3,"click"],[1,"fa","fa-trash"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(t,i){if(t&1){let u=f();C(0,J,15,6,"ng-template",null,0,A),r(2,"div",1)(3,"div",2)(4,"button",3),a(5,"i",4),r(6,"span",5),m("click",function(){c(u);let z=b(1);return l(i.open(z,null))}),p(7,"Add Exercise"),o()()(),r(8,"ul",6),S(9,K,6,3,"li",7,H,!1,Q,4,0,"div",8),o()()}t&2&&(s(9),F(i.exerciseLogService.exercises()))},dependencies:[T,R,q,U,P,L,M,$,I,D,O],encapsulation:2,changeDetection:0})}}return n})();export{ce as ExercisesPageComponent};
