import{H as D,I as O,p as E,q}from"./chunk-6EYGD3XX.js";import{Ac as M,Fb as v,Gb as b,Hb as V,I as f,Ia as d,K as w,Kb as F,Mb as g,N as I,T,Vb as C,Wb as H,Ya as S,eb as y,fb as _,ib as k,k as h,ua as u,va as c,wb as $,z as p}from"./chunk-ARLDQED4.js";var A=["typeaheadInput"],L=["typeaheadInstance"],X=(()=>{class r{constructor(){this.typeaheadInputHtml=y.required("typeaheadInput"),this.typeaheadInstance=y.required("typeaheadInstance"),this.disabled=d(!1),this.items=d.required(),this.control=_(),this.value=_(),this.itemSelector=d(i=>`${i??""}`),this.placeholder=d("Placeholder"),this.#e=M(()=>{let i=this.control(),t=this.value(),e=this.typeaheadInputHtml();e&&(e.nativeElement.value=this.itemSelector()(i?.value??t??null))}),this.focus$=new h,this.click$=new h,this.search=null}#e;ngOnInit(){this.search=j(this.focus$,this.click$,this.typeaheadInstance(),this.items,this.itemSelector())}clear(){let i=this.typeaheadInputHtml();this.control.update(t=>(t?.reset(),t)),this.value.set(null),i&&(i.nativeElement.value="")}onSelectItem(i){this.control.update(t=>(t?.patchValue(i.item),t)),this.value.set(i.item)}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275cmp=k({type:r,selectors:[["app-typeahead"]],viewQuery:function(t,e){t&1&&(C(e.typeaheadInputHtml,A,5),C(e.typeaheadInstance,L,5)),t&2&&H(2)},inputs:{disabled:[1,"disabled"],items:[1,"items"],control:[1,"control"],value:[1,"value"],itemSelector:[1,"itemSelector"],placeholder:[1,"placeholder"]},outputs:{control:"controlChange",value:"valueChange"},decls:6,vars:6,consts:[["typeaheadInput","","typeaheadInstance","ngbTypeahead"],[1,"input-group"],["type","text",1,"form-control",3,"selectItem","focus","click","placeholder","ngbTypeahead","popupClass","resultFormatter","inputFormatter","disabled"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-times"]],template:function(t,e){if(t&1){let a=F();v(0,"div",1)(1,"input",2,0),g("selectItem",function(n){return u(a),c(e.onSelectItem(n))})("focus",function(){let n;return u(a),c(e.focus$.next((n=(n=e.control())==null?null:n.value)!==null&&n!==void 0?n:null))})("click",function(){let n;return u(a),c(e.click$.next((n=(n=e.control())==null?null:n.value)!==null&&n!==void 0?n:null))}),b(),v(4,"button",3),g("click",function(){return u(a),c(e.clear())}),V(5,"i",4),b()()}if(t&2){let a;S(),$("placeholder",e.placeholder())("ngbTypeahead",e.search)("popupClass","typeahead")("resultFormatter",e.itemSelector())("inputFormatter",e.itemSelector())("disabled",e.disabled()||((a=e.control())==null?null:a.disabled))}},dependencies:[q,E,O,D],styles:["[_nghost-%COMP%]{display:block;width:100%}"],changeDetection:0})}}return r})();function j(r,Q,i,t,e){return a=>{let s=a.pipe(T()),n=r.pipe(p(l=>({type:"focus",value:e(l)}))),N=Q.pipe(p(l=>({type:"click",value:e(l)}))),P=f(n,N).pipe(I(50),w(l=>!!l.length),p(l=>l.map(o=>o.type).includes("focus")&&l.map(o=>o.type).includes("click")?"":l.map(o=>o.type).includes("click")?i.isPopupOpen()?null:"":null));return f(s,P).pipe(p(l=>{let o=t();return l===null?[]:l?o.filter(m=>!!m).filter(m=>e(m).toLowerCase().includes(l.toLowerCase())):o}))}}export{X as a};
