import{a as Y}from"./chunk-NUDFPEP6.js";import{a as X}from"./chunk-SXQIG57Z.js";import{a as U}from"./chunk-PNHENRYA.js";import{a as K}from"./chunk-XVKG7MT5.js";import"./chunk-JWGIT43Z.js";import{a as Q}from"./chunk-JRGS3YIA.js";import{f as T,w as x}from"./chunk-XETK3SMN.js";import{Bb as N,Cb as z,Db as c,Ka as l,Kc as J,Nb as r,Ob as v,Pb as D,Rb as R,Sb as j,Tb as W,Ua as P,Ub as G,Vb as $,Wb as w,Wc as I,cc as _,dc as A,ea as s,ec as F,ja as h,ka as L,kc as y,lc as q,mb as g,nb as f,pb as B,pc as H,qb as V,rb as b,sb as u,ta as k,tb as p,ub as E,vb as d,wb as a,xb as O,zb as S}from"./chunk-NQKVPPC6.js";function te(t,o){if(t&1&&(d(0,"div"),r(1),a()),t&2){c(2);let n=w(0);l(),v(n.amount+n.food.unit)}}function oe(t,o){if(t&1){let n=S();d(0,"div",1),z("click",function(){h(n);let i=c();return L(i.navigateToEditLog())}),d(1,"div",2)(2,"div",3)(3,"div",4),r(4),_(5,"titlecase"),a(),d(6,"div",5),r(7),_(8,"parseToDate"),a(),d(9,"div",5),r(10),a()(),d(11,"div",6)(12,"div")(13,"div",7),r(14,"Calories:"),a(),d(15,"div",7),r(16,"Protein:"),a(),d(17,"div",7),r(18,"Fat:"),a(),d(19,"div",7),r(20,"Amount:"),a()(),d(21,"div")(22,"div"),r(23),_(24,"padStart"),a(),d(25,"div"),r(26),_(27,"padStart"),a(),d(28,"div"),r(29),_(30,"padStart"),a(),g(31,te,2,1,"div"),a()()()()}if(t&2){let n=c(),e=w(0);l(4),v(A(5,7,n.title())),l(3),v(A(8,9,e.date)),l(3),v(e.user==null?null:e.user.name),l(13),D(" ",F(24,11,n.calories(),2),"cal "),l(3),D(" ",F(27,14,n.protein(),2),"g "),l(3),v(e.food!=null&&e.food.fat?F(30,17,(e.food==null?null:e.food.fat)??e.fat,2)+"g":"-"),l(2),f(e.amount&&e.food?31:-1)}}function ie(t,o){t&1&&(d(0,"div",0)(1,"div",8)(2,"div",9)(3,"div",4),O(4,"span",10),a(),d(5,"div",5),O(6,"span",11),a()()()())}var Z=(()=>{let o=class o{constructor(){this.router=s(T),this.foodLog=H(),this.title=y(()=>{let e=this.foodLog(),i=e?.food?.name??e?.description??"",m=50;return i.length>m?i.substring(0,m)+"...":i}),this.calories=y(()=>{let e=this.foodLog();return e?.food?.calories?e.food.calories*e.amount/e.food.amount:e?.calories??0}),this.protein=y(()=>{let e=this.foodLog();return e?.food?.protein?e.food.protein*e.amount/e.food.amount:e?.protein??0})}navigateToEditLog(){let e=this.foodLog();e&&this.router.navigate([x.FOOD_LOGS,x.EDIT,e.foodLogId])}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=P({type:o,selectors:[["app-food-log"]],inputs:{foodLog:[1,"foodLog"]},decls:3,vars:2,consts:[[1,"log"],[1,"log",3,"click"],[1,"grid"],[1,"d-flex","flex-column","align-self-center"],[1,"title"],[1,"hint"],[1,"series"],[1,"text-end"],[2,"display","grid","grid-template-columns","auto auto"],[1,"d-flex","flex-column","placeholder-glow"],[1,"placeholder","col-6"],[1,"placeholder","col-12"]],template:function(i,m){if(i&1&&(G(0),g(1,oe,32,20,"div",0)(2,ie,7,0,"div",0)),i&2){let C=$(m.foodLog());l(),f(C?1:2)}},dependencies:[J,U,Q],styles:[".log[_ngcontent-%COMP%]{background-color:var(--light-bg);color:var(--font-color);margin-bottom:8px;border-radius:5px;padding:.2rem .6rem}.log[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:50% 50%}.log[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:15px;font-weight:600}.log[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:12px;opacity:.8}.log[_ngcontent-%COMP%]   .series[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 30%;font-size:12px;opacity:.8;gap:10px}"]});let t=o;return t})();var ne=(t,o)=>o.foodLogId;function de(t,o){if(t&1&&E(0,"app-food-log",7),t&2){let n=c().$implicit;b("foodLog",n)}}function ae(t,o){t&1&&(u(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11),E(4,"span",12),p(),u(5,"div",13),E(6,"span",14),p()()()())}function re(t,o){if(t&1&&g(0,de,1,1,"app-food-log",7)(1,ae,7,0,"div",8),t&2){let n=o.$implicit;f(n?0:1)}}function le(t,o){t&1&&(u(0,"div",5)(1,"div",15)(2,"span",16),r(3,"Loading..."),p()()())}function me(t,o){if(t&1){let n=S();u(0,"app-paginator",17),W("currentPageChange",function(i){h(n);let m=c();return j(m.currentPage,i)||(m.currentPage=i),L(i)}),p()}if(t&2){let n,e=c();R("currentPage",e.currentPage),b("pageCount",((n=e.foodLogs.value())==null?null:n.pageCount)??0)}}var Me=(()=>{let o=class o{constructor(){this.foodsApiService=s(Y),this.foodLogsApiService=s(K),this.router=s(T),this.currentPage=k(0),this.foodLogs=I({stream:()=>this.foodLogsApiService.getFoodLogs(this.currentPage())}),this.foods=I({stream:()=>this.foodsApiService.getFoods()}),q(()=>{this.currentPage(),this.foodLogs.reload()})}navigateToAddLog(){this.router.navigate([x.FOOD_LOGS,x.CREATE])}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=P({type:o,selectors:[["app-food-logs-page"]],decls:10,vars:2,consts:[[1,"header-footer-padding"],[1,"container"],[1,"d-flex","justify-content-end","mb-3"],[1,"btn","btn-link","p-0","d-flex","align-items-center","add-log-button",3,"click"],[1,"iconoir-plus-circle-solid","add-log-icon"],[1,"position-absolute","top-50","start-50","translate-middle"],[3,"currentPage","pageCount"],[3,"foodLog"],[1,"log"],[1,"grid"],[1,"d-flex","flex-column","placeholder-glow"],[1,"title"],[1,"placeholder","col-6"],[1,"hint"],[1,"placeholder","col-12"],["role","status",1,"app-spinner","spinner-border","text-primary"],[1,"visually-hidden"],[3,"currentPageChange","currentPage","pageCount"]],template:function(i,m){if(i&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),N("click",function(){return m.navigateToAddLog()}),r(4," Add Food Log "),E(5,"i",4),p()(),B(6,re,2,1,null,null,ne,!1,le,4,0,"div",5),g(9,me,1,2,"app-paginator",6),p()()),i&2){let C,M;l(6),V((C=m.foodLogs.value())==null?null:C.data),l(3),f(!((M=m.foodLogs.value())==null||M.data==null)&&M.data.length?9:-1)}},dependencies:[Z,X],styles:[".add-log-button[_ngcontent-%COMP%]{text-decoration:none;color:#fff}.add-log-icon[_ngcontent-%COMP%]{font-size:1.2rem;margin:0 .3rem}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto}"],changeDetection:0});let t=o;return t})();export{Me as FoodsPageComponent};
