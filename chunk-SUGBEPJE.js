import{Db as N,Ka as a,Kb as g,Mb as w,Nb as S,Pb as z,Ua as x,Zb as P,e as M,f as b,jb as d,kc as n,la as f,lc as T,mb as O,nb as _,pc as v,rb as C,rc as V,sb as y,ta as o,tb as l,ub as p,xd as A,yd as E}from"./chunk-HR6XHDMR.js";function q(r,c){if(r&1&&(f(),p(0,"circle",5)),r&2){let t=N();g("transition",t.transition()),d("stroke-width",t.strokeWidth())("stroke-dasharray",t.excessStrokeDashArray())("stroke-dashoffset",t.excessStrokeDashOffset())("r",t.radius())("cx",t.dimensions()/2)("cy",t.dimensions()/2)}}var H=(()=>{var c;let t=class t{constructor(){M(this,c);this.value=v(0),this.maxValue=v(1),this.size=V("m"),this.count=o(0),this.showExcess=o(!1),this.percent=n(()=>this.value()*100/this.maxValue()),this.progressClass=n(()=>{let s=this.percent();return s>100||s>=70?"success":s>=50?"average":"danger"}),this.dimensions=n(()=>{switch(this.size()){case"l":return 100;case"m":return 100;case"s":return 50}}),this.strokeWidth=n(()=>{switch(this.size()){case"l":return 7;case"m":return 7;case"s":return 3}}),this.fontSize=n(()=>{switch(this.size()){case"l":return 7;case"m":return 24;case"s":return 12}}),this.radius=n(()=>this.dimensions()/2-this.strokeWidth()*2),this.circumference=n(()=>this.radius()*2*Math.PI),this.strokeDashOffset=o(this.circumference()),this.excessStrokeDashOffset=o(this.circumference()),this.transition=o("none"),this.strokeDashArray=n(()=>{let s=this.circumference();return`${s} ${s}`}),this.excessStrokeDashArray=n(()=>{let s=this.circumference();return`${s} ${s}`}),b(this,c,T(()=>{let s=this.percent(),i=this.circumference(),e=800;setTimeout(()=>{if(this.transition.set(`stroke-dashoffset ${e}ms`),s<=100){let h=i-s/100*i;this.strokeDashOffset.set(h),this.showExcess.set(!1)}else this.strokeDashOffset.set(0),setTimeout(()=>{this.showExcess.set(!0),setTimeout(()=>{let u=s-100,m=i-u/100*i;this.excessStrokeDashOffset.set(m)},50)},e/2);this.animateCountUp(this.value(),e)},1e3)}))}animateCountUp(s,i=2e3){let e=this.count(),h=performance.now(),u=m=>{let W=m-h,$=k=>k*(2-k),D=Math.min(W/i,1),F=$(D),I=Math.round(e+(s-e)*F);this.count.set(I),D<1?requestAnimationFrame(u):this.count.set(s)};requestAnimationFrame(u)}ngOnInit(){this.transition.set("none"),this.strokeDashOffset.set(this.circumference()),this.excessStrokeDashOffset.set(this.circumference()),this.showExcess.set(!1)}};c=new WeakMap,t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=x({type:t,selectors:[["app-ring"]],inputs:{value:[1,"value"],maxValue:[1,"maxValue"],size:[1,"size"]},outputs:{size:"sizeChange"},decls:6,vars:23,consts:[["tooltipClass","ring-tooltip","ontouchstart","","tabindex","-1",1,"progress-ring",3,"ngbTooltip"],["x","50%","y","52%","fill","white",1,"progress-ring__text"],["fill","transparent","stroke","",1,"progress-ring__circle","default"],["fill","transparent",1,"progress-ring__circle"],["fill","transparent",1,"progress-ring__circle","excess",3,"transition"],["fill","transparent",1,"progress-ring__circle","excess"]],template:function(i,e){i&1&&(f(),y(0,"svg",0)(1,"text",1),S(2),l(),p(3,"circle",2)(4,"circle",3),O(5,q,1,8,":svg:circle",4),l()),i&2&&(C("ngbTooltip",P("",e.value()," / ",e.maxValue())),d("height",e.dimensions())("width",e.dimensions()),a(),g("font-size",e.fontSize()),a(),z(" ",e.count()," "),a(),d("stroke-width",e.strokeWidth())("r",e.radius())("cx",e.dimensions()/2)("cy",e.dimensions()/2),a(),w(e.progressClass()),g("transition",e.transition()),d("stroke-width",e.strokeWidth())("stroke-dasharray",e.strokeDashArray())("stroke-dashoffset",e.strokeDashOffset())("r",e.radius())("cx",e.dimensions()/2)("cy",e.dimensions()/2),a(),_(e.showExcess()?5:-1))},dependencies:[E,A],styles:["svg[_ngcontent-%COMP%]:focus{outline:none}.progress-ring__text[_ngcontent-%COMP%]{font-size:24px;font-weight:700;transform-origin:50% 50%;text-anchor:middle;dominant-baseline:middle}.progress-ring__circle[_ngcontent-%COMP%]{transform:rotate(-90deg);transform-origin:50% 50%;stroke:var(--light-bg)}.excess[_ngcontent-%COMP%]{stroke:#00c3ff}.success[_ngcontent-%COMP%]{stroke:#27bb65}.average[_ngcontent-%COMP%]{stroke:#fdcd00}.danger[_ngcontent-%COMP%]{stroke:#c33e37}.default[_ngcontent-%COMP%]{stroke:var(--light-bg)}"],changeDetection:0});let r=t;return r})();export{H as a};
