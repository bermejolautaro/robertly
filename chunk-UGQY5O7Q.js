import{a as z}from"./chunk-IAUBVA4A.js";import{a as R}from"./chunk-3KUG2XYY.js";import{C as $,R as J,d as L,f as O,g as A,n as N}from"./chunk-SLXMBMHO.js";import{d as B,j as F}from"./chunk-KWBPPEPJ.js";import{Bb as f,Db as C,Gb as x,Hb as M,Hc as v,Ib as y,Jb as k,Jc as W,Kb as n,Lb as r,Mb as h,Tb as b,Ub as E,a as _,b as g,cb as i,dc as l,fc as T,kb as Y,qa as u,qc as w,rc as G,ub as P,zb as j}from"./chunk-W53POS3V.js";function U(t,c){if(t&1&&(n(0,"div",6),h(1,"app-ring",7),n(2,"div",8),l(3),w(4,"titlecase"),r()()),t&2){let e=c.$implicit;i(),f("value",e.totalSeries)("maxValue",10*1),i(2),T(" ",G(4,3,e.muscleGroup)," ")}}function q(t,c){if(t&1&&(n(0,"h6"),l(1,"Series Per Muscle"),r(),n(2,"div",5),y(3,U,5,5,"div",6,M),r()),t&2){let e=E();i(3),k(e.seriesPerWeek())}}function H(t,c){if(t&1&&(n(0,"div",6),h(1,"app-ring",7),n(2,"div",8),l(3),w(4,"titlecase"),r()()),t&2){let e=c.$implicit;i(),f("value",e.totalSeries)("maxValue",10*4),i(2),T(" ",G(4,3,e.muscleGroup)," ")}}function K(t,c){if(t&1&&(n(0,"h6"),l(1,"Series Per Muscle"),r(),n(2,"div",5),y(3,H,5,5,"div",6,M),r()),t&2){let e=E();i(3),k(e.seriesPerMonth())}}function Q(t,c){if(t&1&&(n(0,"div",6),h(1,"app-ring",7),n(2,"div",8),l(3),w(4,"titlecase"),r()()),t&2){let e=c.$implicit;i(),f("value",e.totalSeries)("maxValue",10*52),i(2),T(" ",G(4,3,e.muscleGroup)," ")}}function X(t,c){if(t&1&&(n(0,"h6"),l(1,"Series Per Muscle"),r(),n(2,"div",5),y(3,Q,5,5,"div",6,M),r()),t&2){let e=E();i(3),k(e.seriesPerYear())}}var de=(()=>{class t{constructor(){this.document=u(B),this.dayjs=u(J),this.exerciseLogService=u(O),this.exerciseLogApiService=u(A),this.defaultValues=v(()=>this.exerciseLogService.muscleGroups().map(e=>({totalSeries:0,muscleGroup:e??"",firstDateInPeriod:"",month:0,week:0,year:0}))),this.period=P("year"),this.seriesPerWeek=v(this.defaultValues),this.seriesPerMonth=v(this.defaultValues),this.seriesPerYear=v(this.defaultValues),this.selectedOptionControl=P(new N("Series Per Muscle")),this.options=P(["Series Per Muscle","Exercise","Tonnage"]),this.seriesPerMuscle=L({loader:()=>this.exerciseLogApiService.getSeriesPerMuscle()}),this.#e=W(()=>{let e=this.seriesPerMuscle.value();if(e){let p=this.dayjs().year(),o=this.dayjs().month()+1,S=this.dayjs().week(),V=e.seriesPerMuscleWeekly.filter(a=>a.week===S&&a.year===p),D=e.seriesPerMuscleMonthly.filter(a=>a.month===o&&a.year===p),I=e.seriesPerMuscleYearly.filter(a=>a.year===p);V.length&&this.seriesPerWeek.update(a=>a.map(s=>{let m=V.find(d=>d.muscleGroup===s.muscleGroup);return m?g(_({},s),{totalSeries:m?.totalSeries??0}):s})),D.length&&this.seriesPerMonth.update(a=>a.map(s=>{let m=D.find(d=>d.muscleGroup===s.muscleGroup);return m?g(_({},s),{totalSeries:m?.totalSeries??0}):s})),I&&this.seriesPerYear.update(a=>a.map(s=>{let m=I.find(d=>d.muscleGroup===s.muscleGroup);return m?g(_({},s),{totalSeries:m?.totalSeries??0}):s}))}})}#e;ngOnInit(){this.document.defaultView?.scroll({top:0,left:0,behavior:"smooth"})}static{this.\u0275fac=function(p){return new(p||t)}}static{this.\u0275cmp=Y({type:t,selectors:[["app-stats-page"]],decls:14,vars:12,consts:[[1,"header-footer-padding"],[1,"container"],[1,"pb-4"],[3,"control","items","showClear"],[1,"btn","me-1","badge","rounded-pill","chip",3,"click"],[1,"d-flex","flex-wrap","justify-content-around","align-items-center"],[1,"d-flex","justify-content-center","align-items-center","flex-column"],[3,"value","maxValue"],[2,"text-align","center","font-size","12px","padding","0.5rem"]],template:function(p,o){p&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),h(3,"app-dropdown",3),r(),n(4,"div",2)(5,"button",4),b("click",function(){return o.period.set("week")}),l(6," Week "),r(),n(7,"button",4),b("click",function(){return o.period.set("month")}),l(8," Month "),r(),n(9,"button",4),b("click",function(){return o.period.set("year")}),l(10," Year "),r()(),j(11,q,5,0)(12,K,5,0)(13,X,5,0),r()()),p&2&&(i(3),f("control",o.selectedOptionControl())("items",o.options())("showClear",!1),i(2),C("active",o.period()==="week"),i(2),C("active",o.period()==="month"),i(2),C("active",o.period()==="year"),i(2),x(o.period()==="week"?11:-1),i(),x(o.period()==="month"?12:-1),i(),x(o.period()==="year"?13:-1))},dependencies:[$,z,F,R],styles:[".badge.chip[_ngcontent-%COMP%]{font-size:16px;font-weight:400}.badge.chip.active[_ngcontent-%COMP%]{--bs-btn-active-border-color: transparent;--bs-btn-active-bg: var(--primary) }"],changeDetection:0})}}return t})();export{de as StatsPageComponent};
