import{e as k,r as A,s as D,w as u}from"./chunk-MZNJ3QJ4.js";import{$c as L,Ab as h,Cb as l,Ka as m,Mb as p,Oc as I,Qb as f,Rb as _,Sb as y,Ua as w,Uc as V,Wc as E,cd as T,dd as W,ea as g,ja as c,ka as d,mb as x,nb as v,sb as o,ta as C,tb as s,ub as M,yb as b,z as S}from"./chunk-QFD2HAQI.js";function O(i,n){if(i&1){let r=b();o(0,"div",2)(1,"button",3),h("click",function(){c(r);let t=l();return d(t.onClickSignInWithGoogle())}),M(2,"img",4),o(3,"span"),p(4,"Sign In with Google"),s()()(),o(5,"div",5)(6,"div",6)(7,"input",7),y("ngModelChange",function(t){c(r);let a=l();return _(a.email,t)||(a.email=t),d(t)}),s()(),o(8,"div",8)(9,"input",9),y("ngModelChange",function(t){c(r);let a=l();return _(a.password,t)||(a.password=t),d(t)}),s()(),o(10,"div",10)(11,"button",11),h("click",function(){c(r);let t=l();return d(t.onClickSignIn())}),p(12," Sign In "),s()()()}if(i&2){let r=l();m(7),f("ngModel",r.email),m(2),f("ngModel",r.password)}}function P(i,n){i&1&&(o(0,"div",1)(1,"div",12)(2,"span",13),p(3,"Loading..."),s()()())}var U=(()=>{let n=class n{constructor(){this.authApiService=g(D),this.toastService=g(A),this.router=g(k),this.isLoading=C(!1),this.email="",this.password=""}async ngOnInit(){await this.authApiService.tryRefreshToken().then(e=>{e&&this.router.navigate([u.HOME])})}async onClickSignIn(){if(!(!this.email||!this.password)){try{this.isLoading.set(!0),await S(this.authApiService.signIn({email:this.email,password:this.password})),this.router.navigate([u.HOME])}catch{this.toastService.error("Sign in with email failed.")}this.isLoading.set(!1)}}async onClickSignInWithGoogle(){try{this.isLoading.set(!0),await this.authApiService.signInWithGoogle(),this.router.navigate([u.HOME])}catch{this.toastService.error("Sign in with google failed.")}this.isLoading.set(!1)}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=w({type:n,selectors:[["app-signin"]],decls:3,vars:1,consts:[[1,"container","my-3"],[1,"position-absolute","top-50","start-50","translate-middle"],[1,"d-flex","justify-content-center","mt-2"],["type","button",1,"btn","btn-light","w-100","sign-in-google",3,"click"],["width","32","height","32","ngSrc","assets/icons/google-sign-in.png"],[1,"my-3"],[1,"input-group"],["type","text","placeholder","Email",1,"form-control",3,"ngModelChange","ngModel"],[1,"input-group","my-1"],["type","password","placeholder","Password",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-end","my-2"],["type","button",1,"btn","btn-primary","me-2",3,"click"],["role","status",1,"robertly-spinner","spinner-border","text-primary"],[1,"visually-hidden"]],template:function(t,a){t&1&&(o(0,"div",0),x(1,O,13,2)(2,P,4,0,"div",1),s()),t&2&&(m(),v(a.isLoading()?2:1))},dependencies:[T,V,E,L,W,I],styles:[".sign-in-google[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border:1px solid rgb(226,232,240);background-color:#fff;gap:5px}"],changeDetection:0});let i=n;return i})();export{U as SignInComponent};
