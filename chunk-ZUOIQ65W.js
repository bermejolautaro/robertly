import{a as Y}from"./chunk-Y6EKPJ4B.js";import{a as X}from"./chunk-QGYEKLIY.js";import{a as U}from"./chunk-XE6WEVY3.js";import{a as K}from"./chunk-NK5XGOBY.js";import"./chunk-JWGIT43Z.js";import{a as Q}from"./chunk-3VC7TMDY.js";import{f as F,w as _}from"./chunk-PYDHMLSI.js";import{Bb as V,Cb as z,Db as c,Ka as l,Kc as J,Nb as a,Ob as f,Pb as b,Rb as N,Sb as R,Tb as j,Ua as L,Ub as W,Vb as G,Wb as $,Wc as A,cc as u,dc as D,ea as s,ec as y,ja as h,ka as P,kc as w,lc as q,mb as C,nb as x,pb as k,pc as H,qb as B,rb as T,sb as g,ta as I,tb as m,ub as E,vb as n,wb as d,xb as O,zb as S}from"./chunk-DCXKOQXA.js";function te(t,o){if(t&1){let r=S();n(0,"div",1),z("click",function(){h(r);let i=c();return P(i.navigateToEditLog())}),n(1,"div",2)(2,"div",3)(3,"div",4),a(4),u(5,"titlecase"),d(),n(6,"div",5),a(7),u(8,"parseToDate"),d(),n(9,"div",5),a(10),d()(),n(11,"div",6)(12,"div",7)(13,"span"),a(14,"Calories:"),d(),n(15,"span"),a(16),u(17,"padStart"),d()(),n(18,"div",7)(19,"span"),a(20,"Protein:"),d(),n(21,"span"),a(22),u(23,"padStart"),d()(),n(24,"div",7)(25,"span"),a(26,"Fat:"),d(),n(27,"span"),a(28),u(29,"padStart"),d()(),n(30,"div",7)(31,"span"),a(32,"Amount:"),d(),n(33,"span"),a(34),d()()()()()}if(t&2){let r=c(),e=$(0);l(4),f(D(5,7,e.food.name)),l(3),f(D(8,9,e.date)),l(3),f(e.user.name),l(6),b(" ",y(17,11,r.calories(),2),"cal"),l(6),b(" ",y(23,14,r.protein(),2),"g"),l(6),f(e.food.fat?y(29,17,e.food.fat,2)+"g":"-"),l(6),f(e.amount+e.food.unit)}}function oe(t,o){t&1&&(n(0,"div",0)(1,"div",8)(2,"div",9)(3,"div",4),O(4,"span",10),d(),n(5,"div",5),O(6,"span",11),d()()()())}var Z=(()=>{let o=class o{constructor(){this.router=s(F),this.foodLog=H(),this.calories=w(()=>{let e=this.foodLog();return e?.food.calories?e.food.calories*e.amount/e.food.amount:0}),this.protein=w(()=>{let e=this.foodLog();return e?.food.protein?e.food.protein*e.amount/e.food.amount:0})}navigateToEditLog(){let e=this.foodLog();e&&this.router.navigate([_.FOOD_LOGS,_.EDIT,e.foodLogId])}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=L({type:o,selectors:[["app-food-log"]],inputs:{foodLog:[1,"foodLog"]},decls:3,vars:2,consts:[[1,"log"],[1,"log",3,"click"],[1,"grid"],[1,"d-flex","flex-column","align-self-center"],[1,"title"],[1,"hint"],[1,"series"],[1,"serie"],[2,"display","grid","grid-template-columns","auto auto"],[1,"d-flex","flex-column","placeholder-glow"],[1,"placeholder","col-6"],[1,"placeholder","col-12"]],template:function(i,p){if(i&1&&(W(0),C(1,te,35,20,"div",0)(2,oe,7,0,"div",0)),i&2){let v=G(p.foodLog());l(),x(v?1:2)}},dependencies:[J,U,Q],styles:[".log[_ngcontent-%COMP%]{background-color:var(--light-bg);color:var(--font-color);margin-bottom:8px;border-radius:5px;padding:.2rem .6rem}.log[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:50% 50%}.log[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:15px;font-weight:600}.log[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:12px;opacity:.8}.log[_ngcontent-%COMP%]   .series[_ngcontent-%COMP%]{display:grid;font-size:12px;opacity:.8}.log[_ngcontent-%COMP%]   .series[_ngcontent-%COMP%]   .serie[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;text-align:right}"]});let t=o;return t})();var ie=(t,o)=>o.foodLogId;function ne(t,o){if(t&1&&E(0,"app-food-log",7),t&2){let r=c().$implicit;T("foodLog",r)}}function ae(t,o){t&1&&(g(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11),E(4,"span",12),m(),g(5,"div",13),E(6,"span",14),m()()()())}function de(t,o){if(t&1&&C(0,ne,1,1,"app-food-log",7)(1,ae,7,0,"div",8),t&2){let r=o.$implicit;x(r?0:1)}}function re(t,o){t&1&&(g(0,"div",5)(1,"div",15)(2,"span",16),a(3,"Loading..."),m()()())}function le(t,o){if(t&1){let r=S();g(0,"app-paginator",17),j("currentPageChange",function(i){h(r);let p=c();return R(p.currentPage,i)||(p.currentPage=i),P(i)}),m()}if(t&2){let r,e=c();N("currentPage",e.currentPage),T("pageCount",((r=e.foodLogs.value())==null?null:r.pageCount)??0)}}var Me=(()=>{let o=class o{constructor(){this.foodsApiService=s(Y),this.foodLogsApiService=s(K),this.router=s(F),this.currentPage=I(0),this.foodLogs=A({stream:()=>this.foodLogsApiService.getFoodLogs(this.currentPage())}),this.foods=A({stream:()=>this.foodsApiService.getFoods()}),q(()=>{this.currentPage(),this.foodLogs.reload()})}navigateToAddLog(){this.router.navigate([_.FOOD_LOGS,_.CREATE])}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=L({type:o,selectors:[["app-food-logs-page"]],decls:10,vars:2,consts:[[1,"header-footer-padding"],[1,"container"],[1,"d-flex","justify-content-end","mb-3"],[1,"btn","btn-link","p-0","d-flex","align-items-center","add-log-button",3,"click"],[1,"iconoir-plus-circle-solid","add-log-icon"],[1,"position-absolute","top-50","start-50","translate-middle"],[3,"currentPage","pageCount"],[3,"foodLog"],[1,"log"],[1,"grid"],[1,"d-flex","flex-column","placeholder-glow"],[1,"title"],[1,"placeholder","col-6"],[1,"hint"],[1,"placeholder","col-12"],["role","status",1,"app-spinner","spinner-border","text-primary"],[1,"visually-hidden"],[3,"currentPageChange","currentPage","pageCount"]],template:function(i,p){if(i&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),V("click",function(){return p.navigateToAddLog()}),a(4," Add Food Log "),E(5,"i",4),m()(),k(6,de,2,1,null,null,ie,!1,re,4,0,"div",5),C(9,le,1,2,"app-paginator",6),m()()),i&2){let v,M;l(6),B((v=p.foodLogs.value())==null?null:v.data),l(3),x(!((M=p.foodLogs.value())==null||M.data==null)&&M.data.length?9:-1)}},dependencies:[Z,X],styles:[".add-log-button[_ngcontent-%COMP%]{text-decoration:none;color:#fff}.add-log-icon[_ngcontent-%COMP%]{font-size:1.2rem;margin:0 .3rem}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto}"],changeDetection:0});let t=o;return t})();export{Me as FoodsPageComponent};
