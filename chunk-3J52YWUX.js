import{a as G}from"./chunk-R3ZO37F3.js";import{a as K}from"./chunk-KY7B6MWQ.js";import{a as Q}from"./chunk-H444DXMD.js";import"./chunk-JRGS3YIA.js";import{d as j,f as q,i as H,j as J,y as X}from"./chunk-MMNCJC44.js";import{Bb as P,Db as c,Ka as r,Kc as E,Lb as _,Nb as p,Ob as L,Pb as I,Tc as z,Ua as k,Ub as N,Vb as O,Wb as w,Wc as U,Xb as B,Zb as Y,cc as $,dc as R,dd as W,ea as u,ja as b,ka as M,kc as S,mb as C,nb as f,ob as m,pb as g,pc as F,qb as h,rb as v,sb as s,ta as V,tb as l,ub as D,vb as T,wb as x,zb as A}from"./chunk-NQKVPPC6.js";function ie(e,i){if(e&1&&(T(0,"div",3)(1,"strong"),p(2),x()()),e&2){let t=i.$implicit;r(2),L(t)}}function ne(e,i){if(e&1&&(T(0,"div",5),p(1),x()),e&2){let t=i.$implicit;_("day-not-in-month",!t.isInMonth)("day-highlighted",t.isHighlighted&&t.isInMonth),r(),I(" ",t.date.getDate()," ")}}function ae(e,i){if(e&1&&(T(0,"div",1),p(1),$(2,"titlecase"),x(),T(3,"div",2),g(4,ie,3,1,"div",3,m),g(6,ne,2,5,"div",4,m),x()),e&2){let t=i.$implicit,n=c();r(),I(" ",R(2,1,n.getMonthName(n.year(),t))," "),r(3),h(n.weekDays),r(2),h(n.getCalendarDaysForMonth(n.year(),t))}}function re(e,i){let t=new Date(e,i,1),n=new Date(e,i+1,0),a=new Date(t);a.setDate(a.getDate()-t.getDay());let o=[],d=a;for(;d<=n||d.getDay()!==0;)o.push(new Date(d)),d.setDate(d.getDate()+1);return o}var Z=(()=>{let i=class i{constructor(){this.highlightedDates=F([]),this.year=F.required(),this.months=Array.from({length:12}).map((n,a)=>a),this.weekDays=["DO","LU","MA","MI","JU","VI","SA"]}getMonthName(n,a){let o=new Date(n,a,1);return Intl.DateTimeFormat("es-AR",{month:"long"}).format(o)}getCalendarDaysForMonth(n,a){let o=this.highlightedDates();return re(n,a).map(y=>({isHighlighted:o.some(ee=>ee.getTime()===y.getTime()),isInMonth:y.getMonth()===a,date:y}))}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=k({type:i,selectors:[["app-calendar"]],inputs:{highlightedDates:[1,"highlightedDates"],year:[1,"year"]},decls:3,vars:0,consts:[[1,"months-container"],[1,"month"],[1,"calendar-grid"],[1,"weekday"],[1,"day",3,"day-not-in-month","day-highlighted"],[1,"day"]],template:function(a,o){a&1&&(T(0,"div",0),g(1,ae,8,3,null,null,m),x()),a&2&&(r(),h(o.months))},dependencies:[E],styles:[".day[_ngcontent-%COMP%]{padding:.75rem;font-size:14px;border:1px solid var(--light-bg)}.day-highlighted[_ngcontent-%COMP%]{background-color:var(--primary)}.day-not-in-month[_ngcontent-%COMP%]{background-color:var(--light-bg);opacity:.5}.month[_ngcontent-%COMP%]{text-align:center;font-weight:600;font-size:20px}.months-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.75rem;flex-direction:column}.calendar-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);background-color:var(--bg);border:1px solid var(--light-bg)}.weekday[_ngcontent-%COMP%]{padding:.75rem;background-color:var(--light-bg)}"]});let e=i;return e})();function oe(e,i){if(e&1&&(s(0,"div",2),D(1,"app-dropdown",3),l(),D(2,"app-calendar",4)),e&2){let t=c(2);r(),v("items",t.years())("placeholder","Select a date")("control",t.control)("showClear",!1),r(),v("highlightedDates",t.highlightedDates())("year",t.control.value??2025)}}function de(e,i){if(e&1&&(s(0,"div",0),D(1,"app-progress-bar",5),l()),e&2){let t=i.$implicit;r(),v("label",Y("Week ",t.week," of ",t.year))("current",t.daysTrained)("goal",4)("IsExcessInterpretedAsNegative",!1)}}function se(e,i){if(e&1&&g(0,de,2,6,"div",0,m),e&2){c(2);let t=w(9);h(t.daysTrainedWeekly)}}function le(e,i){if(e&1&&(s(0,"div",0),D(1,"app-progress-bar",5),l()),e&2){let t=i.$implicit,n=c(3);r(),v("current",t.daysTrained)("goal",16)("IsExcessInterpretedAsNegative",!1)("label",n.getMonthLabel(t))}}function ce(e,i){if(e&1&&g(0,le,2,4,"div",0,m),e&2){c(2);let t=w(9);h(t.daysTrainedMonthly)}}function pe(e,i){if(e&1&&(s(0,"div",0),D(1,"app-progress-bar",5),l()),e&2){let t=i.$implicit;r(),v("label",B(t.year))("current",t.daysTrained)("goal",208)("IsExcessInterpretedAsNegative",!1)}}function me(e,i){if(e&1&&g(0,pe,2,5,"div",0,m),e&2){c(2);let t=w(9);h(t.daysTrainedYearly)}}function ge(e,i){if(e&1&&(C(0,oe,3,6),C(1,se,2,0),C(2,ce,2,0),C(3,me,2,0)),e&2){let t=c();f(t.period()==="date"?0:-1),r(),f(t.period()==="week"?1:-1),r(),f(t.period()==="month"?2:-1),r(),f(t.period()==="year"?3:-1)}}var Se=(()=>{let i=class i{constructor(){this.exerciseLogApiService=u(K),this.router=u(q),this.route=u(j),this.dayjs=u(X),this.titleCasePipe=u(E),this.period=V("week"),this.control=new W(2025),this.daysTrained=U({stream:()=>this.exerciseLogApiService.getDaysTrained2()}),this.highlightedDates=S(()=>this.daysTrained.value()?.daysTrained.map(n=>new Date(n.date))??[]),this.years=S(()=>J(H(this.highlightedDates().map(n=>n.getFullYear())),(n,a)=>a-n)),this.route.queryParamMap.pipe(z()).subscribe(n=>{let a=n.get("period");a==="month"?this.period.set("month"):a==="year"?this.period.set("year"):a==="date"?this.period.set("date"):this.period.set("week")})}getMonthLabel(n){return this.titleCasePipe.transform(this.dayjs(`${n.year}-${n.month}-01`).format("MMMM[ - ]YYYY"))}onClickPeriod(n){this.period.set(n),this.router.navigate([],{queryParams:{period:n}})}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=k({type:i,selectors:[["app-series-per-muscle-page"]],decls:11,vars:10,consts:[[1,"pb-4"],[1,"btn","me-1","badge","rounded-pill","chip",3,"click"],[1,"year-container"],[1,"mb-3",3,"items","placeholder","control","showClear"],[3,"highlightedDates","year"],[3,"current","goal","IsExcessInterpretedAsNegative","label"]],template:function(a,o){if(a&1){let d=A();s(0,"div",0)(1,"button",1),P("click",function(){return b(d),M(o.onClickPeriod("date"))}),p(2," Date "),l(),s(3,"button",1),P("click",function(){return b(d),M(o.onClickPeriod("week"))}),p(4," Week "),l(),s(5,"button",1),P("click",function(){return b(d),M(o.onClickPeriod("month"))}),p(6," Month "),l(),s(7,"button",1),P("click",function(){return b(d),M(o.onClickPeriod("year"))}),p(8," Year "),l()(),N(9),C(10,ge,4,4)}if(a&2){r(),_("active",o.period()==="date"),r(2),_("active",o.period()==="week"),r(2),_("active",o.period()==="month"),r(2),_("active",o.period()==="year"),r(2);let d=O(o.daysTrained.value());r(),f(d?10:-1)}},dependencies:[Q,Z,G],styles:[".badge.chip[_ngcontent-%COMP%]{font-size:16px;font-weight:400}.badge.chip.active[_ngcontent-%COMP%]{--bs-btn-active-border-color: transparent;--bs-btn-active-bg: var(--primary)}.year-container[_ngcontent-%COMP%]{width:25%}"],changeDetection:0});let e=i;return e})();export{Se as DaysTrainedPageComponent};
