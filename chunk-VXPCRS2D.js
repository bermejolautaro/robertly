import{a as te}from"./chunk-O27UE7TO.js";import{d as U,f as H,h as b,k as R,l as F,n as w,y as ie}from"./chunk-F4UEUSBD.js";import{Bb as h,Db as l,Jb as S,Jc as J,Ka as a,Kc as V,Lb as y,Nb as m,Ob as j,Pb as z,Tc as K,Ua as E,Wc as Q,Ya as u,Za as I,bc as T,cc as L,dc as q,ea as c,gc as G,hb as N,hd as X,ib as W,id as Z,ja as P,ka as C,kc as k,mb as M,nb as v,ob as d,pb as _,qb as g,rb as f,sb as s,ta as B,tb as p,td as ee,ub as O,yb as x,zb as A}from"./chunk-HR6XHDMR.js";var re=()=>[import("./chunk-SN2E33A2.js").then(e=>e.RingComponent),V],$=(e,t)=>({date:e,groupedSeries:t});function ne(e,t){if(e&1&&(s(0,"div",5),O(1,"app-ring",6),s(2,"div",7),m(3),L(4,"titlecase"),p()()),e&2){let n=l().$implicit;a(),f("value",n.totalSeries)("maxValue",n.targetValue),a(2),z(" ",q(4,3,n.muscleGroup)," ")}}function oe(e,t){e&1&&O(0,"div")}function ae(e,t){e&1&&(I(0,ne,5,5)(1,oe,1,0),N(2,0,re,null,1),W(0,-1))}function se(e,t){if(e&1&&(s(0,"div",1)(1,"div",3),m(2),p(),s(3,"div",4),_(4,ae,4,0,null,null,d),p()()),e&2){let n=t.date,i=t.groupedSeries;a(2),j(n),a(2),g(i)}}function le(e,t){e&1&&x(0)}function pe(e,t){if(e&1&&u(0,le,1,0,"ng-container",8),e&2){let n=t.$implicit;l(2);let i=S(8);f("ngTemplateOutlet",i)("ngTemplateOutletContext",T(2,$,n.date,n.groupedSeries))}}function ce(e,t){if(e&1&&_(0,pe,1,5,"ng-container",null,d),e&2){let n=l();g(n.seriesPerWeek())}}function me(e,t){e&1&&x(0)}function ue(e,t){if(e&1&&u(0,me,1,0,"ng-container",8),e&2){let n=t.$implicit;l(2);let i=S(8);f("ngTemplateOutlet",i)("ngTemplateOutletContext",T(2,$,n.date,n.groupedSeries))}}function de(e,t){if(e&1&&_(0,ue,1,5,"ng-container",null,d),e&2){let n=l();g(n.seriesPerMonth())}}function _e(e,t){e&1&&x(0)}function ge(e,t){if(e&1&&u(0,_e,1,0,"ng-container",8),e&2){let n=t.$implicit;l(2);let i=S(8);f("ngTemplateOutlet",i)("ngTemplateOutletContext",T(2,$,n.date,n.groupedSeries))}}function fe(e,t){if(e&1&&_(0,ge,1,5,"ng-container",null,d),e&2){let n=l();g(n.seriesPerYear())}}var Fe=(()=>{let t=class t{constructor(){this.exerciseLogApiService=c(te),this.router=c(H),this.route=c(U),this.dayjs=c(ie),this.titleCasePipe=c(V),this.seriesPerMuscle=Q({stream:()=>this.exerciseLogApiService.getSeriesPerMuscle()}),this.period=B("week"),this.seriesPerWeek=k(()=>{let i=this.seriesPerMuscle.value();return i?b(i.seriesPerMuscleWeekly,F(r=>`${r.year}-${r.week?.toString().padStart(2,"0")}`),w(),R(([r,o])=>({date:`Week ${r.split("-")[1]} of ${r.split("-")[0]}`,groupedSeries:o}))):[]}),this.seriesPerMonth=k(()=>{let i=this.seriesPerMuscle.value();return i?b(i.seriesPerMuscleMonthly,F(r=>`${r.year?.toString()}-${r.month?.toString().padStart(2,"0")}-01`),w(),R(([r,o])=>({date:this.titleCasePipe.transform(this.dayjs(r).format("MMMM[ - ]YYYY")),groupedSeries:o}))):[]}),this.seriesPerYear=k(()=>{let i=this.seriesPerMuscle.value();return i?b(i.seriesPerMuscleYearly,F(r=>` ${r.year} `),w(),R(([r,o])=>({date:r,groupedSeries:o}))):[]}),this.route.queryParamMap.pipe(K()).subscribe(i=>{let r=i.get("period");r==="month"?this.period.set("month"):r==="year"?this.period.set("year"):this.period.set("week")})}onClickPeriod(i){this.period.set(i),this.router.navigate([],{queryParams:{period:i}})}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=E({type:t,selectors:[["app-series-per-muscle-page"]],decls:12,vars:9,consts:[["template",""],[1,"pb-4"],[1,"btn","me-1","badge","rounded-pill","chip",3,"click"],[1,"pb-2","text-end"],[1,"series-per-muscle-grid"],[1,"d-flex","justify-content-center","align-items-center","flex-column"],["size","s",3,"value","maxValue"],[1,"series-per-muscle-label"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,o){if(r&1){let D=A();s(0,"div",1)(1,"button",2),h("click",function(){return P(D),C(o.onClickPeriod("week"))}),m(2," Week "),p(),s(3,"button",2),h("click",function(){return P(D),C(o.onClickPeriod("month"))}),m(4," Month "),p(),s(5,"button",2),h("click",function(){return P(D),C(o.onClickPeriod("year"))}),m(6," Year "),p()(),u(7,se,6,1,"ng-template",null,0,G),M(9,ce,2,0),M(10,de,2,0),M(11,fe,2,0)}r&2&&(a(),y("active",o.period()==="week"),a(2),y("active",o.period()==="month"),a(2),y("active",o.period()==="year"),a(4),v(o.period()==="week"?9:-1),a(),v(o.period()==="month"?10:-1),a(),v(o.period()==="year"?11:-1))},dependencies:[ee,X,Z,J],styles:[".badge.chip[_ngcontent-%COMP%]{font-size:16px;font-weight:400}.badge.chip.active[_ngcontent-%COMP%]{--bs-btn-active-border-color: transparent;--bs-btn-active-bg: var(--primary)}.series-per-muscle-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr;gap:.5rem .2rem}.series-per-muscle-label[_ngcontent-%COMP%]{text-align:center;font-size:12px}"],changeDetection:0});let e=t;return e})();export{Fe as SeriesPerMusclePageComponent};
