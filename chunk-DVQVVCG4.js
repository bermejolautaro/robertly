import{a as K}from"./chunk-CZDKVWRZ.js";import{a as J}from"./chunk-O63YV56W.js";import{a as q,b as H}from"./chunk-5QZXHRDY.js";import{a as $}from"./chunk-WS2VYG76.js";import"./chunk-IOCVHRNR.js";import{B as u,e as F}from"./chunk-QHET2GWM.js";import{d as b}from"./chunk-6EYGD3XX.js";import{Ac as W,Bb as v,Db as M,Eb as I,Fb as i,Gb as n,Hb as s,Ia as A,Ka as D,Kb as L,Mb as P,Nb as c,Rc as G,Ya as r,Yb as a,Zb as g,_b as T,ac as k,bc as B,cc as V,dc as z,ec as R,fc as j,ib as h,kc as f,lc as w,ma as m,mc as S,nb as _,ua as x,va as C,wb as E,zc as O}from"./chunk-ARLDQED4.js";function U(t,d){if(t&1){let e=L();i(0,"div",1),P("click",function(){x(e);let l=c();return C(l.navigateToEditLog())}),i(1,"div",2)(2,"div",3)(3,"div",4),a(4),f(5,"titlecase"),n(),i(6,"div",5),a(7),f(8,"parseToDate"),n(),i(9,"div",5),a(10),n()(),i(11,"div",6)(12,"div",7)(13,"div",8)(14,"span"),a(15,"Calories:"),n(),i(16,"span"),a(17),f(18,"padStart"),n()(),i(19,"div",8)(20,"span"),a(21,"Protein:"),n(),i(22,"span"),a(23),f(24,"padStart"),n()(),i(25,"div",8)(26,"span"),a(27,"Fat:"),n(),i(28,"span"),a(29),f(30,"padStart"),n()(),i(31,"div",8)(32,"span"),a(33,"Amount:"),n(),i(34,"span"),a(35),n()()()()()()}if(t&2){let e=c(),o=j(0);r(4),g(w(5,7,o.food.name)),r(3),g(w(8,9,o.date)),r(3),g(o.user.name),r(7),T(" ",S(18,11,e.calories(),2),"cal"),r(6),T(" ",S(24,14,e.protein(),2),"g"),r(6),g(o.food.fat?S(30,17,o.food.fat,2)+"g":"-"),r(6),g(o.amount+o.food.unit)}}function X(t,d){t&1&&(i(0,"div",0)(1,"div",2)(2,"div",9)(3,"div",4),s(4,"span",10),n(),i(5,"div",5),s(6,"span",11),n()()()())}var N=(()=>{class t{constructor(){this.router=m(F),this.foodLog=A(),this.calories=O(()=>{let e=this.foodLog();return e?.food.calories?e.food.calories*e.amount/e.food.amount:0}),this.protein=O(()=>{let e=this.foodLog();return e?.food.protein?e.food.protein*e.amount/e.food.amount:0})}navigateToEditLog(){let e=this.foodLog();e&&this.router.navigate([u.FOOD_LOGS,u.EDIT,e.foodLogId])}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-food-log"]],inputs:{foodLog:[1,"foodLog"]},decls:3,vars:2,consts:[[1,"log"],[1,"log",3,"click"],[2,"display","grid","grid-template-columns","auto auto"],[1,"d-flex","flex-column","align-self-center"],[1,"title"],[1,"hint"],[1,"series"],[1,"serie"],[2,"display","grid","grid-template-columns","1fr 1fr","text-align","right"],[1,"d-flex","flex-column","placeholder-glow"],[1,"placeholder","col-6"],[1,"placeholder","col-12"]],template:function(o,l){if(o&1&&(z(0),_(1,U,36,20,"div",0)(2,X,7,0,"div",0)),o&2){let p=R(l.foodLog());r(),v(p?1:2)}},dependencies:[G,H,q],styles:[".log[_ngcontent-%COMP%]{background-color:var(--light-bg);color:var(--font-color);margin-bottom:8px;border-radius:5px;padding:.2rem .6rem}.log[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:15px;font-weight:600}.log[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:12px;opacity:.8}.log[_ngcontent-%COMP%]   .series[_ngcontent-%COMP%]{display:grid;font-size:12px;opacity:.8}"]})}}return t})();var Y=(t,d)=>d.foodLogId;function Z(t,d){if(t&1&&s(0,"app-food-log",7),t&2){let e=c().$implicit;E("foodLog",e)}}function ee(t,d){t&1&&(i(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11),s(4,"span",12),n(),i(5,"div",13),s(6,"span",14),n()()()())}function te(t,d){if(t&1&&_(0,Z,1,1,"app-food-log",7)(1,ee,7,0,"div",8),t&2){let e=d.$implicit;v(e?0:1)}}function oe(t,d){t&1&&(i(0,"div",5)(1,"div",15)(2,"span",16),a(3,"Loading..."),n()()())}function ie(t,d){if(t&1){let e=L();i(0,"app-paginator",17),V("currentPageChange",function(l){x(e);let p=c();return B(p.currentPage,l)||(p.currentPage=l),C(l)}),n()}if(t&2){let e,o=c();k("currentPage",o.currentPage),E("pageCount",(e=(e=o.foodLogs.value())==null?null:e.pageCount)!==null&&e!==void 0?e:0)}}var Pe=(()=>{class t{constructor(){this.foodsApiService=m(K),this.foodLogsApiService=m($),this.router=m(F),this.currentPage=D(0),this.foodLogs=b({loader:()=>this.foodLogsApiService.getFoodLogs(this.currentPage())}),this.foods=b({loader:()=>this.foodsApiService.getFoods()}),W(()=>{this.currentPage(),this.foodLogs.reload()})}navigateToAddLog(){this.router.navigate([u.FOOD_LOGS,u.CREATE])}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-food-logs-page"]],decls:10,vars:2,consts:[[1,"header-footer-padding"],[1,"container"],[1,"d-flex","justify-content-end","mb-3"],[1,"btn","btn-link","p-0","d-flex","align-items-center",2,"text-decoration","none","color","white",3,"click"],[1,"iconoir-plus-circle-solid",2,"font-size","1.2rem","margin","0 0.3rem"],[1,"position-absolute","top-50","start-50","translate-middle"],[3,"currentPage","pageCount"],[3,"foodLog"],[1,"log"],[2,"display","grid","grid-template-columns","auto auto"],[1,"d-flex","flex-column","placeholder-glow"],[1,"title"],[1,"placeholder","col-6"],[1,"hint"],[1,"placeholder","col-12"],["role","status",1,"robertly-spinner","spinner-border","text-primary"],[1,"visually-hidden"],[3,"currentPageChange","currentPage","pageCount"]],template:function(o,l){if(o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),P("click",function(){return l.navigateToAddLog()}),a(4," Add Food Log "),s(5,"i",4),n()(),M(6,te,2,1,null,null,Y,!1,oe,4,0,"div",5),_(9,ie,1,2,"app-paginator",6),n()()),o&2){let p,y;r(6),I((p=l.foodLogs.value())==null?null:p.data),r(3),v(!((y=l.foodLogs.value())==null||y.data==null)&&y.data.length?9:-1)}},dependencies:[N,J],encapsulation:2,changeDetection:0})}}return t})();export{Pe as FoodsPageComponent};
