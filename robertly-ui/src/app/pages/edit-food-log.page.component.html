@if (!isLoading()) {
  <div class="header-footer-padding">
    <div class="container">
      <div class="pb-3">
        <h4 class="title">{{ mode() === 'edit' ? 'Edit' : 'Create' }} Food Log</h4>
        <span class="subtitle">Track your daily meals and your calorie intake</span>
      </div>

      <div>
        <!-- #region INPUT DATE -->
        <div class="mb-2">
          <input
            type="date"
            placeholder="DD-MM-YYYY"
            class="form-control"
            [(ngModel)]="foodLogForm.date"
          />
        </div>
        <!-- #endregion -->

        <!-- #region TYPEAHEAD USER -->
        <div class="mb-2">
          <app-typeahead
            placeholder="User"
            [(value)]="foodLogForm.user"
            [items]="users()"
            [itemSelector]="userSelector"
          ></app-typeahead>
        </div>
        <!-- #endregion -->

        <div class="d-flex align-items-center justify-content-end py-2 gap-2 form-check form-switch">
          <input
            class="form-check-input"
            type="checkbox"
            role="switch"
            id="switchCheckDefault"
            [(ngModel)]="foodLogForm.quickAdd"
            switch
          />
          <label
            class="form-check-label"
            for="switchCheckDefault"
            >Quick Add</label
          >
        </div>

        @if (foodLogForm.quickAdd()) {
          <div class="mb-2">
            <label class="form-label">Description</label>
            <textarea
              type="text"
              placeholder="Description"
              class="form-control"
              [(ngModel)]="foodLogForm.description"
            ></textarea>
          </div>

          <div class="mb-2">
            <label class="form-label">Calories</label>
            <input
              type="text"
              inputmode="decimal"
              placeholder="Calories"
              class="form-control"
              [(ngModel)]="foodLogForm.calories"
              onlyNumbers
            />
          </div>

          <div class="mb-2">
            <label class="form-label">Protein</label>
            <input
              type="text"
              inputmode="decimal"
              placeholder="Protein"
              class="form-control"
              [(ngModel)]="foodLogForm.protein"
              onlyNumbers
            />
          </div>

          <div class="mb-2">
            <label class="form-label">Fat</label>
            <input
              type="text"
              inputmode="decimal"
              placeholder="Fat"
              class="form-control"
              [(ngModel)]="foodLogForm.fat"
              onlyNumbers
            />
          </div>
        } @else {
          <!-- #region TYPEAHEAD FOOD -->
          <div class="mb-2">
            <app-typeahead
              placeholder="Food"
              [(value)]="foodLogForm.food"
              [items]="foods.value()"
              [itemSelector]="foodSelector"
            ></app-typeahead>
          </div>
          <!-- #endregion -->

          <!-- #region INPUT AMOUNT -->
          <div class="mb-2">
            <input
              type="text"
              inputmode="decimal"
              [placeholder]="amountPlaceholder()"
              class="form-control"
              [(ngModel)]="foodLogForm.amount"
              onlyNumbers
            />
          </div>
          <!-- #endregion -->
        }
      </div>

      <div class="row g-2 mb-3">
        <div class="col">
          <button
            type="button"
            class="btn btn-secondary w-100"
            (click)="cancel()"
          >
            Cancel
          </button>
        </div>

        <div class="col">
          <button
            type="button"
            class="btn w-100 d-flex justify-content-center align-items-center"
            [class.btn-primary]="foodLogFormValid()"
            [class.btn-secondary]="!foodLogFormValid() || isSaveLoading()"
            [disabled]="!foodLogFormValid() || isSaveLoading()"
            (click)="save()"
          >
            @if (!isSaveLoading()) {
              <i
                class="fa fa-save px-2"
                aria-hidden="true"
              ></i>
            } @else {
              <span
                class="spinner-border spinner-border-sm mx-2"
                aria-hidden="true"
              ></span>
              <span
                class="visually-hidden"
                role="status"
                >Loading...</span
              >
            }

            Save
          </button>
        </div>
      </div>

      @if (mode() === 'edit') {
        <button
          type="button"
          class="btn btn-danger w-100 delete-button"
          (click)="openDeleteModal()"
        >
          <i
            class="fa fa-trash px-2"
            aria-hidden="true"
          ></i>
          <span>Delete</span>
        </button>
      }
    </div>
  </div>
} @else {
  <div class="position-absolute top-50 start-50 translate-middle">
    <div
      class="app-spinner spinner-border text-primary"
      role="status"
    >
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
}
