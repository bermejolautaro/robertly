import{F as z,G as D}from"./chunk-TXMB3Z4A.js";import{Fb as C,Gb as m,Hb as _,Ia as h,Ka as a,Qb as M,Ya as n,Yb as y,_b as O,fb as g,ib as k,vb as c,wa as f,xb as u,yc as i,zb as v,zc as b}from"./chunk-SEHCXKDS.js";var E=(()=>{class r{constructor(){this.value=h(0),this.maxValue=h(1),this.size=g("m"),this.count=a(0),this.percent=i(()=>Math.min(100,this.value()*100/this.maxValue())),this.percentClass=i(()=>{let t=this.percent();return t>=70?"success":t>=50?"average":"danger"}),this.dimensions=i(()=>{switch(this.size()){case"l":return 100;case"m":return 100;case"s":return 50}}),this.strokeWidth=i(()=>{switch(this.size()){case"l":return 7;case"m":return 7;case"s":return 3}}),this.fontSize=i(()=>{switch(this.size()){case"l":return 7;case"m":return 24;case"s":return 12}}),this.radius=i(()=>this.dimensions()/2-this.strokeWidth()*2),this.circumference=i(()=>this.radius()*2*Math.PI),this.strokeDashOffset=a(this.circumference()),this.transition=a("none"),this.strokeDashArray=i(()=>{let t=this.circumference();return`${t} ${t}`}),this.#e=b(()=>{let t=this.percent(),s=this.circumference(),e=s-t/100*s,o=800;setTimeout(()=>{this.transition.set(`stroke-dashoffset ${o}ms`),this.strokeDashOffset.set(e),this.animateCountUp(this.value(),o)},1e3)})}animateCountUp(t,s=2e3){let e=this.count(),o=performance.now(),l=w=>{let P=w-o,T=p=>p*(2-p),d=Math.min(P/s,1),V=T(d),S=Math.round(e+(t-e)*V);this.count.set(S),d<1?requestAnimationFrame(l):this.count.set(t)};requestAnimationFrame(l)}ngOnInit(){this.transition.set("none"),this.strokeDashOffset.set(this.circumference())}#e;static{this.\u0275fac=function(s){return new(s||r)}}static{this.\u0275cmp=k({type:r,selectors:[["app-ring"]],inputs:{value:[1,"value"],maxValue:[1,"maxValue"],size:[1,"size"]},outputs:{size:"sizeChange"},decls:5,vars:22,consts:[["tooltipClass","ring-tooltip","ontouchstart","","tabindex","-1",1,"progress-ring",3,"ngbTooltip"],["x","50%","y","52%","fill","white",1,"progress-ring__text"],["fill","transparent","stroke","",1,"progress-ring__circle","default"],["fill","transparent",1,"progress-ring__circle"]],template:function(s,e){s&1&&(f(),C(0,"svg",0)(1,"text",1),y(2),m(),_(3,"circle",2)(4,"circle",3),m()),s&2&&(M("ngbTooltip","",e.value()," / ",e.maxValue(),""),c("height",e.dimensions())("width",e.dimensions()),n(),u("font-size",e.fontSize()),n(),O(" ",e.count()," "),n(),c("stroke-width",e.strokeWidth())("r",e.radius())("cx",e.dimensions()/2)("cy",e.dimensions()/2),n(),v(e.percentClass()),u("transition",e.transition()),c("stroke-width",e.strokeWidth())("stroke-dasharray",e.strokeDashArray())("stroke-dashoffset",e.strokeDashOffset())("r",e.radius())("cx",e.dimensions()/2)("cy",e.dimensions()/2))},dependencies:[D,z],styles:["svg[_ngcontent-%COMP%]:focus{outline:none}.progress-ring__text[_ngcontent-%COMP%]{font-size:24px;font-weight:700;transform-origin:50% 50%;text-anchor:middle;dominant-baseline:middle}.progress-ring__circle[_ngcontent-%COMP%]{transform:rotate(-90deg);transform-origin:50% 50%;stroke:var(--light-bg)}.success[_ngcontent-%COMP%]{stroke:#27bb65}.average[_ngcontent-%COMP%]{stroke:#fdcd00}.danger[_ngcontent-%COMP%]{stroke:#c33e37}"],changeDetection:0})}}return r})();export{E as a};
