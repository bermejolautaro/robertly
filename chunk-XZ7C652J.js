import{a as Z}from"./chunk-WIBL7RHR.js";import{a as X}from"./chunk-AFIXFPII.js";import{e as I,f as $,g as G,h as Y,i as W,j as O,l as V,m as Q,y as ee}from"./chunk-EJHYECQS.js";import{C as K,d as q,l as H}from"./chunk-TXMB3Z4A.js";import{Ac as J,Bb as R,Cb as _,Db as u,Eb as f,Fb as o,Gb as a,Hb as m,Hc as U,Ka as d,Mb as b,Nb as v,Nc as A,Ya as n,Yb as p,Zb as w,_b as E,a as y,b as k,ib as L,jc as D,kc as B,ma as C,nb as h,tb as T,ub as F,wb as P,yb as M,zc as N}from"./chunk-SEHCXKDS.js";var j=()=>[import("./chunk-M6HK7H2I.js").then(e=>e.RingComponent),A];function te(e,r){if(e&1&&(o(0,"div",7),m(1,"app-ring",8),o(2,"div",9),p(3),D(4,"titlecase"),a()()),e&2){let t=v().$implicit;n(),P("value",t.totalSeries)("maxValue",t.target*1),n(2),E(" ",B(4,3,t.muscleGroup)," ")}}function ie(e,r){e&1&&m(0,"div")}function ne(e,r){e&1&&(h(0,te,5,5)(1,ie,1,0),T(2,0,j,null,1),F(0,-1))}function re(e,r){if(e&1&&(o(0,"div",2)(1,"div",5),p(2),a(),o(3,"div",6),u(4,ne,4,0,null,null,_),a()()),e&2){let t=r.$implicit;n(2),w(t[0]),n(2),f(t[1])}}function oe(e,r){if(e&1&&u(0,re,6,1,"div",2,_),e&2){let t=v();f(t.seriesPerWeek())}}function ae(e,r){if(e&1&&(o(0,"div",7),m(1,"app-ring",8),o(2,"div",9),p(3),D(4,"titlecase"),a()()),e&2){let t=v().$implicit;n(),P("value",t.totalSeries)("maxValue",t.target*4),n(2),E(" ",B(4,3,t.muscleGroup)," ")}}function se(e,r){e&1&&m(0,"div")}function le(e,r){e&1&&(h(0,ae,5,5)(1,se,1,0),T(2,0,j,null,1),F(0,-1))}function pe(e,r){if(e&1&&(o(0,"div",2)(1,"div",5),p(2),a(),o(3,"div",6),u(4,le,4,0,null,null,_),a()()),e&2){let t=r.$implicit;n(2),w(t[0]),n(2),f(t[1])}}function ce(e,r){if(e&1&&u(0,pe,6,1,"div",2,_),e&2){let t=v();f(t.seriesPerMonth())}}function me(e,r){if(e&1&&(o(0,"div",7),m(1,"app-ring",8),o(2,"div",9),p(3),D(4,"titlecase"),a()()),e&2){let t=v().$implicit;n(),P("value",t.totalSeries)("maxValue",t.target*52),n(2),E(" ",B(4,3,t.muscleGroup)," ")}}function de(e,r){e&1&&m(0,"div")}function _e(e,r){e&1&&(h(0,me,5,5)(1,de,1,0),T(2,0,j,null,1),F(0,-1))}function ue(e,r){if(e&1&&(o(0,"div",2)(1,"div",5),p(2),a(),o(3,"div",6),u(4,_e,4,0,null,null,_),a()()),e&2){let t=r.$implicit;n(2),w(t[0]),n(2),f(t[1])}}function fe(e,r){if(e&1&&u(0,ue,6,1,"div",2,_),e&2){let t=v();f(t.seriesPerYear())}}function ve(e){switch(e){case"biceps":case"triceps":case"calves":case"shoulders":return 6;case"back":case"legs":case"chest":return 10;case"forearms":case"glutes":return 3;default:return 10}}var we=(()=>{class e{constructor(){this.document=C(U),this.dayjs=C(ee),this.exercisesApiService=C(Q),this.titleCasePipe=C(A),this.exerciseLogApiService=C(X),this.defaultValues=J(()=>this.exercisesApiService.muscleGroups().map(t=>({totalSeries:0,muscleGroup:t??"",firstDateInPeriod:"",month:0,week:0,year:0,target:ve(t)}))),this.period=d("week"),this.seriesPerWeek=d([]),this.seriesPerMonth=d([]),this.seriesPerYear=d([]),this.selectedOptionControl=d(new H("Series Per Muscle")),this.options=d(["Series Per Muscle","Exercise","Tonnage"]),this.seriesPerMuscle=q({loader:()=>this.exerciseLogApiService.getSeriesPerMuscle()}),this.#e=N(()=>{let t=this.seriesPerMuscle.value();if(t){let g=I(t.seriesPerMuscleWeekly,O(i=>`${i.year}-${i.week.toString().padStart(2,"0")}`),Y(i=>this.defaultValues().map(l=>{let c=i.find(S=>S.muscleGroup===l.muscleGroup);return c?k(y({},c),{target:l.target}):l})),V(),$(i=>i[0]),G(),W(i=>[`Week ${i[0].split("-")[1]} of ${i[0].split("-")[0]}`,i[1]])),s=I(t.seriesPerMuscleYearly,O(i=>`${i.year}`),Y(i=>this.defaultValues().map(l=>{let c=i.find(S=>S.muscleGroup===l.muscleGroup);return c?k(y({},c),{target:l.target}):l})),V(),$(i=>i[0]),G()),x=I(t.seriesPerMuscleMonthly,O(i=>`${i.year.toString()}-${i.month.toString().padStart(2,"0")}-01`),Y(i=>this.defaultValues().map(l=>{let c=i.find(S=>S.muscleGroup===l.muscleGroup);return c?k(y({},c),{target:l.target}):l})),V(),$(i=>i[0]),G(),W(i=>[this.titleCasePipe.transform(this.dayjs(i[0]).format("MMM[ - ]YYYY")),i[1]]));this.seriesPerWeek.set(g),this.seriesPerMonth.set(x),this.seriesPerYear.set(s)}})}#e;ngOnInit(){this.document.defaultView?.scroll({top:0,left:0,behavior:"smooth"})}static{this.\u0275fac=function(g){return new(g||e)}}static{this.\u0275cmp=L({type:e,selectors:[["app-stats-page"]],decls:14,vars:12,consts:[[1,"header-footer-padding"],[1,"container"],[1,"pb-4"],[3,"control","items","showClear"],[1,"btn","me-1","badge","rounded-pill","chip",3,"click"],[1,"pb-2","text-end"],[2,"display","grid","grid-template-columns","1fr 1fr 1fr 1fr 1fr","gap","0.5rem 0.2rem"],[1,"d-flex","justify-content-center","align-items-center","flex-column"],["size","s",3,"value","maxValue"],[2,"text-align","center","font-size","12px"]],template:function(g,s){g&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),m(3,"app-dropdown",3),a(),o(4,"div",2)(5,"button",4),b("click",function(){return s.period.set("week")}),p(6," Week "),a(),o(7,"button",4),b("click",function(){return s.period.set("month")}),p(8," Month "),a(),o(9,"button",4),b("click",function(){return s.period.set("year")}),p(10," Year "),a()(),h(11,oe,2,0)(12,ce,2,0)(13,fe,2,0),a()()),g&2&&(n(3),P("control",s.selectedOptionControl())("items",s.options())("showClear",!1),n(2),M("active",s.period()==="week"),n(2),M("active",s.period()==="month"),n(2),M("active",s.period()==="year"),n(2),R(s.period()==="week"?11:-1),n(),R(s.period()==="month"?12:-1),n(),R(s.period()==="year"?13:-1))},dependencies:[K,Z],styles:[".badge.chip[_ngcontent-%COMP%]{font-size:16px;font-weight:400}.badge.chip.active[_ngcontent-%COMP%]{--bs-btn-active-border-color: transparent;--bs-btn-active-bg: var(--primary) }"],changeDetection:0})}}return e})();export{we as StatsPageComponent};
