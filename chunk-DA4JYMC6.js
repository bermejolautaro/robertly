import{a as A}from"./chunk-ZPFUEYMJ.js";import{a as W}from"./chunk-SUGBEPJE.js";import"./chunk-EUTS36DN.js";import{a as U}from"./chunk-T4FD7NZA.js";import"./chunk-JWGIT43Z.js";import{a as O}from"./chunk-O27UE7TO.js";import{a as V}from"./chunk-7IMNVXHC.js";import"./chunk-DIR3HG3V.js";import{f as E,w as F,y as N}from"./chunk-F4UEUSBD.js";import{Bb as v,Ka as d,Nb as o,Nc as b,Pb as D,Ua as M,Wc as y,cc as T,ea as f,fc as C,hd as R,ja as u,ka as h,kc as s,ob as L,pb as k,qb as x,rb as m,sb as e,ta as P,tb as i,ub as r,zb as w}from"./chunk-HR6XHDMR.js";function z(n){let _=new Date(n.getFullYear(),n.getMonth(),1).getDay(),c=n.getDate()+_-1;return Math.ceil(c/7)}function I(n,a){if(n&1&&r(0,"app-exercise-log",16),n&2){let _=a.$implicit;m("exerciseLog",_)}}var re=(()=>{let a=class a{constructor(){this.exerciseLogApiService=f(O),this.foodLogsApiService=f(U),this.router=f(E),this.dayjs=f(N),this.Paths=F,this.daysPerWeekTarget=s(()=>4),this.goalPerWeek=s(()=>Math.min(this.daysPerWeekTarget(),new Date().getDay())),this.goalPerMonth=s(()=>Math.min(this.daysPerWeekTarget()*4,this.daysPerWeekTarget()*z(new Date))),this.goalPerYear=s(()=>Math.min(this.daysPerWeekTarget()*52,this.daysPerWeekTarget()*this.dayjs(new Date).isoWeek())),this.showMoreRecentlyUpdated=P(!1),this.recentlyUpdatedAmountToShow=s(()=>this.showMoreRecentlyUpdated()?this.recentlyUpdatedLogsResource.value()?.length??10:3),this.isLoading=s(()=>this.recentlyUpdatedLogsResource.isLoading()&&this.latestWorkoutLogsResource.isLoading()&&this.exerciseLogStats.isLoading()),this.exerciseLogStats=y({stream:()=>this.exerciseLogApiService.getDaysTrained()}),this.recentlyUpdatedLogsResource=y({stream:()=>this.exerciseLogApiService.getRecentlyUpdated()}),this.latestWorkoutLogsResource=y({stream:()=>this.exerciseLogApiService.getExerciseLogsLatestWorkout()}),this.macros=y({stream:()=>this.foodLogsApiService.getMacros(Intl.DateTimeFormat().resolvedOptions().timeZone)}),this.recentlyUpdatedLogs=s(()=>this.recentlyUpdatedLogsResource.isLoading()?[null,null]:this.recentlyUpdatedLogsResource.value()),this.latestWorkoutLogs=s(()=>this.latestWorkoutLogsResource.isLoading()?[null,null]:this.latestWorkoutLogsResource.value())}navigateTo(c){this.router.navigate(c)}toggleShowMoreRecentlyUpdated(){this.showMoreRecentlyUpdated.update(c=>!c)}};a.\u0275fac=function(S){return new(S||a)},a.\u0275cmp=M({type:a,selectors:[["app-home-page"]],decls:48,vars:17,consts:[[1,"header-footer-padding"],[1,"container"],[1,"pb-3","days-trained-grid"],[1,"d-flex","justify-content-center","align-items-center","flex-column"],[3,"value","maxValue"],[1,"days-trained-label"],[1,"pt-2"],[3,"current","goal","label"],[1,"services"],[1,"service",3,"click"],[1,"service-icon"],[1,"iconoir-book"],[1,"btn","btn-link"],[1,"iconoir-pizza-slice"],[1,"iconoir-gym"],[1,"pt-4","pb-2"],[3,"exerciseLog"],[1,"show-more",3,"click"]],template:function(S,t){if(S&1){let l=w();e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),r(4,"app-ring",4),e(5,"div",5),o(6,"Days trained this week"),i()(),e(7,"div",3),r(8,"app-ring",4),e(9,"div",5),o(10,"Days trained this month"),i()(),e(11,"div",3),r(12,"app-ring",4),e(13,"div",5),o(14,"Days trained this year"),i()()(),e(15,"div",6),r(16,"app-progress-bar",7)(17,"app-progress-bar",7),i(),e(18,"div",6)(19,"div",8)(20,"div",9),v("click",function(){return u(l),h(t.navigateTo([t.Paths.FOOD_LOGS]))}),e(21,"div",10),r(22,"i",11),i(),e(23,"span",12),o(24,"Food Logs"),i()(),e(25,"div",9),v("click",function(){return u(l),h(t.navigateTo([t.Paths.EXERCISE_LOGS]))}),e(26,"div",10),r(27,"i",11),i(),e(28,"span",12),o(29,"Exercise Logs"),i()(),e(30,"div",9),v("click",function(){return u(l),h(t.navigateTo([t.Paths.FOODS]))}),e(31,"div",10),r(32,"i",13),i(),e(33,"span",12),o(34,"Foods"),i()(),e(35,"div",9),v("click",function(){return u(l),h(t.navigateTo([t.Paths.EXERCISES]))}),e(36,"div",10),r(37,"i",14),i(),e(38,"span",12),o(39,"Exercises"),i()()()(),e(40,"div",15)(41,"h6"),o(42,"Recently updated"),i()(),k(43,I,1,1,"app-exercise-log",16,L),T(45,"slice"),e(46,"div",17),v("click",function(){return u(l),h(t.toggleShowMoreRecentlyUpdated())}),o(47),i()()()}if(S&2){let l,g,p=t.exerciseLogStats.value();d(4),m("value",(p==null?null:p.daysTrainedThisWeek)??0)("maxValue",t.goalPerWeek()),d(4),m("value",(p==null?null:p.daysTrainedThisMonth)??0)("maxValue",t.goalPerMonth()),d(4),m("value",(p==null?null:p.daysTrainedThisYear)??0)("maxValue",t.goalPerYear()),d(4),m("current",((l=t.macros.value())==null?null:l.caloriesInDate)??0)("goal",2300)("label","Calories"),d(),m("current",((g=t.macros.value())==null?null:g.proteinInDate)??0)("goal",130)("label","Protein"),d(26),x(C(45,13,t.recentlyUpdatedLogs(),0,t.recentlyUpdatedAmountToShow())),d(4),D(" ",t.showMoreRecentlyUpdated()?"Show less...":"Show more..."," ")}},dependencies:[R,A,W,V,b],styles:[".services[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;align-items:start;margin-top:.5rem;background-color:var(--light-bg);border-radius:5px;padding:.9rem 0;gap:1rem .5rem}.service[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.service[_ngcontent-%COMP%]   .iconoir-plus-circle-solid[_ngcontent-%COMP%]{width:0;height:0;position:relative;top:-26px;right:2px;font-size:18px;color:#a78cf3}.service[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0;font-size:10px;text-decoration:none;color:#fff;width:64px}.service-icon[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-radius:100%;color:#ffffffe6;border:2px solid rgba(255,255,255,.4);padding:1.1rem;width:36px;height:36px;margin-bottom:.15rem}.service-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:22px}.days-trained-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}.days-trained-label[_ngcontent-%COMP%]{text-align:center;font-size:12px;padding:.5rem}.show-more[_ngcontent-%COMP%]{font-size:14px;padding:0 .4rem}"],changeDetection:0});let n=a;return n})();export{re as HomePageComponent};
