import{a as Q}from"./chunk-KFV3GILO.js";import{a as K}from"./chunk-FHOENCVL.js";import{e as D,f as B,g as I,h as O,i as $,k as V,l as G,m as H,y as X}from"./chunk-ZNUAYIES.js";import{C as q,c as J,j as U}from"./chunk-C5LQ3MSO.js";import{d as N,j as Y}from"./chunk-CMFT27PF.js";import{Ab as k,Cb as x,Eb as T,Hb as F,Ib as _,Ic as z,Jb as u,Kb as f,Kc as L,Lb as o,Mb as a,Nb as m,Ub as M,Vb as v,bb as n,ec as l,fc as R,gc as b,jb as j,pa as g,rc as w,sc as E,tb as d,yb as h,zb as y}from"./chunk-LYCTWYRR.js";var A=()=>[import("./chunk-FVSWIPI3.js").then(e=>e.RingComponent),Y];function Z(e,r){if(e&1&&(o(0,"div",7),m(1,"app-ring",8),o(2,"div",9),l(3),w(4,"titlecase"),a()()),e&2){let t=v().$implicit;n(),x("value",t.totalSeries)("maxValue",10*1),n(2),b(" ",E(4,3,t.muscleGroup)," ")}}function ee(e,r){e&1&&m(0,"div")}function te(e,r){e&1&&(h(0,Z,5,5)(1,ee,1,0),y(2,0,A,null,1),k(0,-1))}function ie(e,r){if(e&1&&(o(0,"div",2)(1,"div",5),l(2),a(),o(3,"div",6),u(4,te,4,0,null,null,_),a()()),e&2){let t=r.$implicit;n(2),R(t[0]),n(2),f(t[1])}}function ne(e,r){if(e&1&&u(0,ie,6,1,"div",2,_),e&2){let t=v();f(t.seriesPerWeek())}}function re(e,r){if(e&1&&(o(0,"div",7),m(1,"app-ring",8),o(2,"div",9),l(3),w(4,"titlecase"),a()()),e&2){let t=v().$implicit;n(),x("value",t.totalSeries)("maxValue",10*4),n(2),b(" ",E(4,3,t.muscleGroup)," ")}}function oe(e,r){e&1&&m(0,"div")}function ae(e,r){e&1&&(h(0,re,5,5)(1,oe,1,0),y(2,0,A,null,1),k(0,-1))}function se(e,r){if(e&1&&(o(0,"div",2)(1,"div",5),l(2),a(),o(3,"div",6),u(4,ae,4,0,null,null,_),a()()),e&2){let t=r.$implicit;n(2),R(t[0]),n(2),f(t[1])}}function le(e,r){if(e&1&&u(0,se,6,1,"div",2,_),e&2){let t=v();f(t.seriesPerMonth())}}function pe(e,r){if(e&1&&(o(0,"div",7),m(1,"app-ring",8),o(2,"div",9),l(3),w(4,"titlecase"),a()()),e&2){let t=v().$implicit;n(),x("value",t.totalSeries)("maxValue",10*52),n(2),b(" ",E(4,3,t.muscleGroup)," ")}}function ce(e,r){e&1&&m(0,"div")}function me(e,r){e&1&&(h(0,pe,5,5)(1,ce,1,0),y(2,0,A,null,1),k(0,-1))}function de(e,r){if(e&1&&(o(0,"div",2)(1,"div",5),l(2),a(),o(3,"div",6),u(4,me,4,0,null,null,_),a()()),e&2){let t=r.$implicit;n(2),R(t[0]),n(2),f(t[1])}}function _e(e,r){if(e&1&&u(0,de,6,1,"div",2,_),e&2){let t=v();f(t.seriesPerYear())}}var Me=(()=>{class e{constructor(){this.document=g(N),this.dayjs=g(X),this.exercisesApiService=g(H),this.titleCasePipe=g(Y),this.exerciseLogApiService=g(K),this.defaultValues=z(()=>this.exercisesApiService.muscleGroups().map(t=>({totalSeries:0,muscleGroup:t??"",firstDateInPeriod:"",month:0,week:0,year:0}))),this.period=d("week"),this.seriesPerWeek=d([]),this.seriesPerMonth=d([]),this.seriesPerYear=d([]),this.selectedOptionControl=d(new U("Series Per Muscle")),this.options=d(["Series Per Muscle","Exercise","Tonnage"]),this.seriesPerMuscle=J({loader:()=>this.exerciseLogApiService.getSeriesPerMuscle()}),this.#e=L(()=>{let t=this.seriesPerMuscle.value();if(t){let C=D(t.seriesPerMuscleWeekly,V(i=>`${i.year}-${i.week.toString().padStart(2,"0")}`),$(i=>this.defaultValues().map(p=>{let c=i.find(S=>S.muscleGroup===p.muscleGroup);return c||p})),G(),B(i=>i[0]),I(),O(i=>[`Week ${i[0].split("-")[1]} of ${i[0].split("-")[0]}`,i[1]])),s=D(t.seriesPerMuscleYearly,V(i=>`${i.year}`),$(i=>this.defaultValues().map(p=>{let c=i.find(S=>S.muscleGroup===p.muscleGroup);return c||p})),G(),B(i=>i[0]),I()),P=D(t.seriesPerMuscleMonthly,V(i=>`${i.year.toString()}-${i.month.toString().padStart(2,"0")}-01`),$(i=>this.defaultValues().map(p=>{let c=i.find(S=>S.muscleGroup===p.muscleGroup);return c||p})),G(),B(i=>i[0]),I(),O(i=>[this.titleCasePipe.transform(this.dayjs(i[0]).format("MMM[ - ]YYYY")),i[1]]));this.seriesPerWeek.set(C),this.seriesPerMonth.set(P),this.seriesPerYear.set(s)}})}#e;ngOnInit(){this.document.defaultView?.scroll({top:0,left:0,behavior:"smooth"})}static{this.\u0275fac=function(C){return new(C||e)}}static{this.\u0275cmp=j({type:e,selectors:[["app-stats-page"]],decls:14,vars:12,consts:[[1,"header-footer-padding"],[1,"container"],[1,"pb-4"],[3,"control","items","showClear"],[1,"btn","me-1","badge","rounded-pill","chip",3,"click"],[1,"pb-2","text-end"],[2,"display","grid","grid-template-columns","1fr 1fr 1fr 1fr 1fr","gap","0.5rem 0.2rem"],[1,"d-flex","justify-content-center","align-items-center","flex-column"],["size","s",3,"value","maxValue"],[2,"text-align","center","font-size","12px"]],template:function(C,s){C&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),m(3,"app-dropdown",3),a(),o(4,"div",2)(5,"button",4),M("click",function(){return s.period.set("week")}),l(6," Week "),a(),o(7,"button",4),M("click",function(){return s.period.set("month")}),l(8," Month "),a(),o(9,"button",4),M("click",function(){return s.period.set("year")}),l(10," Year "),a()(),h(11,ne,2,0)(12,le,2,0)(13,_e,2,0),a()()),C&2&&(n(3),x("control",s.selectedOptionControl())("items",s.options())("showClear",!1),n(2),T("active",s.period()==="week"),n(2),T("active",s.period()==="month"),n(2),T("active",s.period()==="year"),n(2),F(s.period()==="week"?11:-1),n(),F(s.period()==="month"?12:-1),n(),F(s.period()==="year"?13:-1))},dependencies:[q,Q],styles:[".badge.chip[_ngcontent-%COMP%]{font-size:16px;font-weight:400}.badge.chip.active[_ngcontent-%COMP%]{--bs-btn-active-border-color: transparent;--bs-btn-active-bg: var(--primary) }"],changeDetection:0})}}return e})();export{Me as StatsPageComponent};
