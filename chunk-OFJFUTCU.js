import{a as W}from"./chunk-57WNUYAP.js";import{b as A,o as N,p as R,q as $,r as j,x as U}from"./chunk-XETK3SMN.js";import{$ as v,$c as P,Bb as C,Db as T,Ka as g,Nb as m,Ob as _,Rb as w,Sb as G,Tb as I,Ua as y,Wc as k,Zc as E,ea as n,ed as D,hd as F,ja as d,ka as f,kc as h,mc as M,ob as x,pb as S,qb as b,sb as c,ta as l,tb as s,zb as V}from"./chunk-NQKVPPC6.js";var B=(()=>{let t=class t{constructor(){this.http=n(A),this.apiUrl=n(U),this.cacheService=n(R),this.endpoint=`${this.apiUrl}/goals`}saveGoal(e){return this.http.post(this.endpoint,e)}getGoals(){let e=`${"getGoals"}`;return this.http.get(this.endpoint).pipe(N(this.cacheService,e))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();function H(o,t){if(o&1){let p=V();c(0,"div",5)(1,"div",6),m(2),s(),c(3,"div",6)(4,"input",7),I("ngModelChange",function(i){let a=d(p).$implicit;return G(a.targetValue,i)||(a.targetValue=i),f(i)}),s()(),c(5,"div",8)(6,"button",9),C("click",function(){let i=d(p).$implicit,a=T();return f(a.onSave(i))}),m(7,"Save"),s()()()}if(o&2){let p=t.$implicit;g(2),_(p.label),g(2),w("ngModel",p.targetValue)}}var ce=(()=>{let t=class t{constructor(){this.exerciseApiService=n($),this.goalsApiService=n(B),this.toastService=n(j),this.muscleGroups=h(()=>this.exerciseApiService.muscleGroups()),this.exercises=h(()=>this.exerciseApiService.exercises()),this.goalsResource=k({stream:()=>this.goalsApiService.getGoals()}),this.goals=M({source:()=>({goals:this.goalsResource.value(),muscleGroups:this.muscleGroups(),exercises:this.exercises()}),computation:({goals:e,muscleGroups:i,exercises:a})=>[{goalType:"bodyweight",label:"Target Weight (kg)",targetValue:l(e?.find(r=>r.goalType==="bodyweight")?.targetValue??0)},{goalType:"calories",label:"Calories (cal)",targetValue:l(e?.find(r=>r.goalType==="calories")?.targetValue??0)},{goalType:"protein",label:"Protein (g)",targetValue:l(e?.find(r=>r.goalType==="protein")?.targetValue??0)},...i.map(r=>({goalType:"series-per-muscle",label:`Series per muscle for ${r}`,targetValue:l(e?.find(u=>u.goalType==="series-per-muscle"&&u.muscleGroup===r)?.targetValue??0),muscleGroup:r})),...a.map(r=>({goalType:"exercise-personal-record",label:`Personal record target for ${r.name}`,targetValue:l(e?.find(u=>u.goalType==="exercise-personal-record"&&u.exerciseId===r.exerciseId)?.targetValue??0),exerciseId:r.exerciseId}))]})}onSave(e){this.goalsApiService.saveGoal({goalType:e.goalType,targetValue:e.targetValue(),exerciseId:e.exerciseId,muscleGroup:e.muscleGroup}).subscribe({next:()=>{this.toastService.ok("Goal saved successfully!"),this.goalsResource.reload()}})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=y({type:t,selectors:[["app-configuration-page"]],decls:9,vars:0,consts:[[1,"header-footer-padding"],[1,"container"],[1,"pb-3"],[1,"title"],[1,"subtitle"],[1,"row","g-1","pb-2"],[1,"col-10"],["type","text","inputmode","decimal","onlyNumbers","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-2"],[1,"btn","btn-secondary",3,"click"]],template:function(i,a){i&1&&(c(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),m(4,"Configuration"),s(),c(5,"span",4),m(6,"Change your preferences and personal targets"),s()(),S(7,H,8,2,"div",5,x),s()()),i&2&&(g(7),b(a.goals()))},dependencies:[W,F,E,P,D],encapsulation:2});let o=t;return o})();export{ce as ConfigurationPageComponent};
