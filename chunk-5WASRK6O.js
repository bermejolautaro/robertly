import{a as z}from"./chunk-HOYYKFYX.js";import{Q as B,R as O,k as N,m as M,n as h,o as $,p as U,q as D,r as L,s as C,u as q,w as j,y as I,z as R}from"./chunk-JK45SKZA.js";import{$a as S,Eb as A,Fb as T,La as l,Mb as G,Wa as f,db as F,eb as w,ec as P,fb as t,ga as _,gb as c,hb as p,ia as y,kb as g,na as a,nb as d,oa as m,ob as v,rb as b,sb as u,tb as V,zb as k}from"./chunk-RKHT2Y7S.js";var J=(o,s)=>s.id;function K(o,s){if(o&1){let i=g();t(0,"div",7)(1,"h4",8),u(2,"Edit Exercise"),c(),t(3,"button",9),d("click",function(){let n=a(i).$implicit;return m(n.dismiss())}),c()(),t(4,"div",10)(5,"form")(6,"div",11),p(7,"input",12),c(),t(8,"div",11),p(9,"input",13),c(),t(10,"div",11),p(11,"input",14),c()()(),t(12,"div",15)(13,"button",16),d("click",function(){let n=a(i).$implicit;return m(n.close())}),u(14,"Save"),c()()}if(o&2){let i=v();l(7),f("formControl",i.exerciseForm.controls.name),l(2),f("formControl",i.exerciseForm.controls.muscleGroup),l(2),f("formControl",i.exerciseForm.controls.type),l(2),f("disabled",i.exerciseForm.invalid||i.exerciseForm.pristine)}}function Q(o,s){if(o&1){let i=g();t(0,"li",17),d("click",function(){let n=a(i).$implicit,x=v(),E=b(1);return m(x.open(E,n))}),t(1,"span"),u(2),A(3,"titlecase"),c(),t(4,"button",18),d("click",function(e){let x=a(i).$implicit;return v().deleteExercise(x),m(e.stopPropagation())}),p(5,"i",19),c()()}if(o&2){let i=s.$implicit;l(2),V(T(3,1,i.name))}}function W(o,s){o&1&&(t(0,"div",20)(1,"div",21)(2,"span",22),u(3,"Loading..."),c()()())}var le=(()=>{let s=class s{constructor(){this.modalService=_(B),this.exerciseLogService=_(N),this.exerciseApiService=_(z),this.exerciseForm=new D({name:new C("",[h.required]),muscleGroup:new C("",[h.required]),type:new C("",[h.required])}),this.isUpdate=!1}ngOnInit(){this.fetchAndUpdateExercises()}open(r,e){this.exerciseForm.reset(),e&&this.exerciseForm.patchValue({name:e.name,muscleGroup:e.muscleGroup,type:e.type}),this.modalService.open(r,{centered:!0}).result.then(()=>{if(this.isUpdate=!!e,e){let n={id:e.id,name:this.exerciseForm.value.name,muscleGroup:this.exerciseForm.value.muscleGroup,type:this.exerciseForm.value.type};this.exerciseApiService.updateExercise(n).subscribe({next:()=>this.fetchAndUpdateExercises()})}else{let n={name:this.exerciseForm.value.name,muscleGroup:this.exerciseForm.value.muscleGroup,type:this.exerciseForm.value.type};this.exerciseApiService.createExercise(n).subscribe({next:()=>this.fetchAndUpdateExercises()})}},()=>{})}close(r){r.close()}deleteExercise(r){this.exerciseApiService.deleteExercise(r.id).subscribe({next:()=>this.fetchAndUpdateExercises()})}fetchAndUpdateExercises(){this.exerciseLogService.updateExercises$.next([]),this.exerciseApiService.getExercises().subscribe(r=>{this.exerciseLogService.updateExercises$.next(r)})}};s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=y({type:s,selectors:[["app-exercises-page"]],standalone:!0,features:[k],decls:12,vars:1,consts:[["content",""],[1,"container","py-3"],[1,"d-flex","justify-content-end","mb-3"],["type","button",1,"btn","btn-primary"],[1,"fa","fa-plus","me-2"],[3,"click"],[1,"list-group"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],["type","text","placeholder","Name",1,"form-control",3,"formControl"],["type","text","placeholder","Muscle Group",1,"form-control",3,"formControl"],["type","text","placeholder","Type",1,"form-control",3,"formControl"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"list-group-item","d-flex","align-items-center",3,"click"],["type","button",1,"btn","btn-danger",2,"margin-left","auto","padding","0.075rem 0.35rem",3,"click"],[1,"fa","fa-trash"],[1,"position-absolute","top-50","start-50","translate-middle"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],["class","list-group-item d-flex align-items-center"]],template:function(e,n){if(e&1){let x=g();S(0,K,15,4,"ng-template",null,0,G),t(2,"div",1)(3,"div",2)(4,"button",3),p(5,"i",4),t(6,"span",5),d("click",function(){a(x);let H=b(1);return m(n.open(H,null))}),u(7,"Add Exercise"),c()()(),t(8,"ul",6),F(9,Q,6,3,"li",23,J,!1,W,4,0),c()()}e&2&&(l(9),w(n.exerciseLogService.exercises()))},dependencies:[P,O,I,q,M,$,U,L,R,j],changeDetection:0});let o=s;return o})();export{le as ExercisesPageComponent};
