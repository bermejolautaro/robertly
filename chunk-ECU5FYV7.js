import{a as ee}from"./chunk-GKVPAEOF.js";import{g as $,h as G,i as Y,j as W,k as j,l as A,n as N,q as Z,y as te}from"./chunk-MZNJ3QJ4.js";import{$b as E,Ab as V,Cb as v,Gc as O,Ka as n,Kb as D,Mb as c,Nb as B,Ob as w,Sc as K,Ua as J,Za as y,a as M,ac as I,b as h,cd as Q,dd as U,ea as C,hb as k,ib as T,ic as q,jc as H,mb as F,nb as R,ob as d,od as X,pb as _,qb as f,rb as b,sb as o,ta as x,tb as a,ub as g}from"./chunk-QFD2HAQI.js";var z=()=>[import("./chunk-W3IOSR26.js").then(e=>e.RingComponent),O];function ie(e,r){if(e&1&&(o(0,"div",4),g(1,"app-ring",5),o(2,"div",6),c(3),E(4,"titlecase"),a()()),e&2){let t=v().$implicit;n(),b("value",t.totalSeries)("maxValue",t.targetValue),n(2),w(" ",I(4,3,t.muscleGroup)," ")}}function re(e,r){e&1&&g(0,"div")}function ne(e,r){e&1&&(y(0,ie,5,5)(1,re,1,0),k(2,0,z,null,1),T(0,-1))}function oe(e,r){if(e&1&&(o(0,"div",0)(1,"div",2),c(2),a(),o(3,"div",3),_(4,ne,4,0,null,null,d),a()()),e&2){let t=r.$implicit;n(2),B(t[0]),n(2),f(t[1])}}function ae(e,r){if(e&1&&_(0,oe,6,1,"div",0,d),e&2){let t=v();f(t.seriesPerWeek())}}function se(e,r){if(e&1&&(o(0,"div",4),g(1,"app-ring",5),o(2,"div",6),c(3),E(4,"titlecase"),a()()),e&2){let t=v().$implicit;n(),b("value",t.totalSeries)("maxValue",t.targetValue),n(2),w(" ",I(4,3,t.muscleGroup)," ")}}function le(e,r){e&1&&g(0,"div")}function pe(e,r){e&1&&(y(0,se,5,5)(1,le,1,0),k(2,0,z,null,1),T(0,-1))}function ce(e,r){if(e&1&&(o(0,"div",0)(1,"div",2),c(2),a(),o(3,"div",3),_(4,pe,4,0,null,null,d),a()()),e&2){let t=r.$implicit;n(2),B(t[0]),n(2),f(t[1])}}function me(e,r){if(e&1&&_(0,ce,6,1,"div",0,d),e&2){let t=v();f(t.seriesPerMonth())}}function ue(e,r){if(e&1&&(o(0,"div",4),g(1,"app-ring",5),o(2,"div",6),c(3),E(4,"titlecase"),a()()),e&2){let t=v().$implicit;n(),b("value",t.totalSeries)("maxValue",t.targetValue),n(2),w(" ",I(4,3,t.muscleGroup)," ")}}function de(e,r){e&1&&g(0,"div")}function _e(e,r){e&1&&(y(0,ue,5,5)(1,de,1,0),k(2,0,z,null,1),T(0,-1))}function fe(e,r){if(e&1&&(o(0,"div",0)(1,"div",2),c(2),a(),o(3,"div",3),_(4,_e,4,0,null,null,d),a()()),e&2){let t=r.$implicit;n(2),B(t[0]),n(2),f(t[1])}}function ge(e,r){if(e&1&&_(0,fe,6,1,"div",0,d),e&2){let t=v();f(t.seriesPerYear())}}var be=(()=>{let r=class r{constructor(){this.exerciseLogApiService=C(ee),this.exercisesApiService=C(Z),this.dayjs=C(te),this.titleCasePipe=C(O),this.defaultValues=H({source:()=>({muscleGroups:this.exercisesApiService.muscleGroups()}),computation:({muscleGroups:m})=>m.map(u=>({totalSeries:0,muscleGroup:u??"",firstDateInPeriod:"",month:0,week:0,year:0,targetValue:0}))}),this.seriesPerMuscle=K({stream:()=>this.exerciseLogApiService.getSeriesPerMuscle()}),this.period=x("week"),this.seriesPerWeek=x([]),this.seriesPerMonth=x([]),this.seriesPerYear=x([]),q(()=>{let m=this.seriesPerMuscle.value();if(m){let u=$(m.seriesPerMuscleWeekly,A(i=>`${i.year}-${i.week.toString().padStart(2,"0")}`),W(i=>this.defaultValues().map(l=>{let p=i.find(P=>P.muscleGroup===l.muscleGroup);return p?h(M({},p),{targetValue:p?.targetValue??l.targetValue}):l})),N(),G(i=>i[0]),Y(),j(i=>[`Week ${i[0].split("-")[1]} of ${i[0].split("-")[0]}`,i[1]])),s=$(m.seriesPerMuscleMonthly,A(i=>`${i.year.toString()}-${i.month.toString().padStart(2,"0")}-01`),W(i=>this.defaultValues().map(l=>{let p=i.find(P=>P.muscleGroup===l.muscleGroup);return p?h(M({},p),{targetValue:p?.targetValue??l.targetValue}):l})),N(),G(i=>i[0]),Y(),j(i=>[this.titleCasePipe.transform(this.dayjs(i[0]).format("MMM[ - ]YYYY")),i[1]])),S=$(m.seriesPerMuscleYearly,A(i=>`${i.year}`),W(i=>this.defaultValues().map(l=>{let p=i.find(P=>P.muscleGroup===l.muscleGroup);return p?h(M({},p),{targetValue:p?.targetValue??l.targetValue}):l})),N(),G(i=>i[0]),Y());this.seriesPerWeek.set(u),this.seriesPerMonth.set(s),this.seriesPerYear.set(S)}})}};r.\u0275fac=function(u){return new(u||r)},r.\u0275cmp=J({type:r,selectors:[["app-series-per-muscle-page"]],decls:10,vars:9,consts:[[1,"pb-4"],[1,"btn","me-1","badge","rounded-pill","chip",3,"click"],[1,"pb-2","text-end"],[2,"display","grid","grid-template-columns","1fr 1fr 1fr 1fr 1fr","gap","0.5rem 0.2rem"],[1,"d-flex","justify-content-center","align-items-center","flex-column"],["size","s",3,"value","maxValue"],[2,"text-align","center","font-size","12px"]],template:function(u,s){u&1&&(o(0,"div",0)(1,"button",1),V("click",function(){return s.period.set("week")}),c(2," Week "),a(),o(3,"button",1),V("click",function(){return s.period.set("month")}),c(4," Month "),a(),o(5,"button",1),V("click",function(){return s.period.set("year")}),c(6," Year "),a()(),F(7,ae,2,0),F(8,me,2,0),F(9,ge,2,0)),u&2&&(n(),D("active",s.period()==="week"),n(2),D("active",s.period()==="month"),n(2),D("active",s.period()==="year"),n(2),R(s.period()==="week"?7:-1),n(),R(s.period()==="month"?8:-1),n(),R(s.period()==="year"?9:-1))},dependencies:[X,Q,U],styles:[".badge.chip[_ngcontent-%COMP%]{font-size:16px;font-weight:400}.badge.chip.active[_ngcontent-%COMP%]{--bs-btn-active-border-color: transparent;--bs-btn-active-bg: var(--primary)}"],changeDetection:0});let e=r;return e})();export{be as SeriesPerMusclePageComponent};
