import{B as V,C as H,V as M,W as E}from"./chunk-SVJV42AB.js";import{B as c,Bb as w,K as f,La as s,Lb as u,Lc as F,Mb as m,Nb as T,Qb as S,Ub as d,W as y,ac as b,bc as I,cb as C,kb as _,m as h,vb as g,wb as v,ya as a,za as p}from"./chunk-HLRLCPE5.js";var k=["typeaheadInput"],R=(()=>{class o{constructor(){this.inputHtml=g.required("typeaheadInput"),this.items=s.required(),this.control=v.required(),this.itemSelector=s(t=>`${t??""}`),this.placeholder=s("Placeholder"),this.#e=F(()=>{let t=this.control(),e=this.inputHtml();e&&(e.nativeElement.value=this.itemSelector()(t.value))}),this.focus$=new h,this.search=null}#e;ngOnInit(){this.search=q(this.focus$,this.items,this.itemSelector())}clear(){let t=this.inputHtml();this.control.update(e=>(e.reset(),e)),t&&(t.nativeElement.value="")}onSelectItem(t){this.control.update(e=>(e.patchValue(t.item),e))}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=_({type:o,selectors:[["app-typeahead"]],viewQuery:function(e,i){e&1&&b(i.inputHtml,k,5),e&2&&I()},inputs:{items:[1,"items"],control:[1,"control"],itemSelector:[1,"itemSelector"],placeholder:[1,"placeholder"]},outputs:{control:"controlChange"},decls:5,vars:5,consts:[["typeaheadInput",""],[1,"input-group"],["type","text",1,"form-control",3,"selectItem","focus","placeholder","ngbTypeahead","popupClass","resultFormatter","inputFormatter"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-times"]],template:function(e,i){if(e&1){let n=S();u(0,"div",1)(1,"input",2,0),d("selectItem",function(l){return a(n),p(i.onSelectItem(l))})("focus",function(){return a(n),p(i.focus$.next(i.control().value))}),m(),u(3,"button",3),d("click",function(){return a(n),p(i.clear())}),T(4,"i",4),m()()}e&2&&(C(),w("placeholder",i.placeholder())("ngbTypeahead",i.search)("popupClass","typeahead")("resultFormatter",i.itemSelector())("inputFormatter",i.itemSelector()))},dependencies:[H,V,E,M],styles:["[_nghost-%COMP%]{display:block;width:100%}"],changeDetection:0})}}return o})();function q(o,$,t){return e=>{let i=e.pipe(y());return f(i,o.pipe(c(n=>t(n)))).pipe(c(n=>{let r=$();return n?r.filter(l=>!!l).filter(l=>t(l).toLowerCase().includes(n.toLowerCase())):r}))}}export{R as a};
