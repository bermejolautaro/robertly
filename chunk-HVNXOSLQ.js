import{A as c,Ad as q,Bb as g,G as y,Hb as v,I,Ib as F,J as T,Ka as S,O as M,Ua as k,hd as O,id as P,ja as p,ka as d,l as f,lc as N,pc as m,qc as C,rb as $,rc as w,sb as _,tb as b,ub as D,zb as V,zd as H}from"./chunk-HR6XHDMR.js";var A=["typeaheadInput"],L=["typeaheadInstance"],X=(()=>{let a=class a{constructor(){this.typeaheadInputHtml=C.required("typeaheadInput"),this.typeaheadInstance=C.required("typeaheadInstance"),this.disabled=m(!1),this.items=m.required(),this.control=w(),this.value=w(),this.itemSelector=m(n=>`${n??""}`),this.placeholder=m("Placeholder"),this.focus$=new f,this.click$=new f,this.search=null,this.setup_effect_update_native_element_on_form_change()}setup_effect_update_native_element_on_form_change(){N(()=>{let n=this.control(),t=this.value(),e=this.typeaheadInputHtml();e&&(e.nativeElement.value=this.itemSelector()(n?.value??t??null))})}ngOnInit(){this.search=j(this.focus$,this.click$,this.typeaheadInstance(),this.items,this.itemSelector())}clear(){let n=this.typeaheadInputHtml();this.control.update(t=>(t?.reset(),t)),this.value.set(null),n&&(n.nativeElement.value="")}onSelectItem(n){this.control.update(t=>(t?.patchValue(n.item),t)),this.value.set(n.item)}};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=k({type:a,selectors:[["app-typeahead"]],viewQuery:function(t,e){t&1&&(v(e.typeaheadInputHtml,A,5),v(e.typeaheadInstance,L,5)),t&2&&F(2)},inputs:{disabled:[1,"disabled"],items:[1,"items"],control:[1,"control"],value:[1,"value"],itemSelector:[1,"itemSelector"],placeholder:[1,"placeholder"]},outputs:{control:"controlChange",value:"valueChange"},decls:6,vars:6,consts:[["typeaheadInput","","typeaheadInstance","ngbTypeahead"],[1,"input-group"],["type","text",1,"form-control",3,"selectItem","focus","click","placeholder","ngbTypeahead","popupClass","resultFormatter","inputFormatter","disabled"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-times"]],template:function(t,e){if(t&1){let l=V();_(0,"div",1)(1,"input",2,0),g("selectItem",function(o){return p(l),d(e.onSelectItem(o))})("focus",function(){let o;return p(l),d(e.focus$.next(((o=e.control())==null?null:o.value)??null))})("click",function(){let o;return p(l),d(e.click$.next(((o=e.control())==null?null:o.value)??null))}),b(),_(4,"button",3),g("click",function(){return p(l),d(e.clear())}),D(5,"i",4),b()()}if(t&2){let l;S(),$("placeholder",e.placeholder())("ngbTypeahead",e.search)("popupClass","typeahead")("resultFormatter",e.itemSelector())("inputFormatter",e.itemSelector())("disabled",e.disabled()||((l=e.control())==null?null:l.disabled))}},dependencies:[P,O,q,H],styles:["[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{border-right:none}[_nghost-%COMP%]   .btn.btn-outline-secondary[_ngcontent-%COMP%]{border-left:none;--bs-btn-border-color: var(--bs-border-color);--bs-btn-bg: var(--bs-body-bg)}"],changeDetection:0});let s=a;return s})();function j(s,a,E,n,t){return e=>{let l=e.pipe(M()),u=s.pipe(c(i=>({type:"focus",value:t(i)}))),o=a.pipe(c(i=>({type:"click",value:t(i)}))),Q=y(u,o).pipe(T(50),I(i=>!!i.length),c(i=>i.map(r=>r.type).includes("focus")&&i.map(r=>r.type).includes("click")?"":i.map(r=>r.type).includes("click")?E.isPopupOpen()?null:"":null));return y(l,Q).pipe(c(i=>{let r=n();return i===null?[]:i?r.filter(h=>!!h).filter(h=>t(h).toLowerCase().includes(i.toLowerCase())):r}))}}export{X as a};
