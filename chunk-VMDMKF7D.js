import{a as D}from"./chunk-BJTZI6DR.js";import{a as F}from"./chunk-DTZJIXI2.js";import{q as k,r as E}from"./chunk-EQNXLAES.js";import{d as G,f as A,h as M,m as I,p as P}from"./chunk-6EYGD3XX.js";import{Bc as w,Cb as v,Db as y,Eb as h,Fb as s,Gb as a,Ka as n,Kb as x,Mb as S,Nb as C,Ya as u,Yb as c,Zb as _,ac as V,bc as b,cc as T,ib as f,ma as p,ua as g,va as m,zc as d}from"./chunk-ARLDQED4.js";function R(o,N){if(o&1){let e=x();s(0,"div",5)(1,"div",6),c(2),a(),s(3,"div",6)(4,"input",7),T("ngModelChange",function(i){let t=g(e).$implicit;return b(t.targetValue,i)||(t.targetValue=i),m(i)}),a()(),s(5,"div",8)(6,"button",9),S("click",function(){let i=g(e).$implicit,t=C();return m(t.onSave(i))}),c(7,"Save"),a()()()}if(o&2){let e=N.$implicit;u(2),_(e.label),u(2),V("ngModel",e.targetValue)}}var K=(()=>{class o{constructor(){this.exerciseApiService=p(k),this.goalsApiService=p(F),this.toastService=p(E),this.muscleGroups=d(()=>this.exerciseApiService.muscleGroups()),this.exercises=d(()=>this.exerciseApiService.exercises()),this.goalsResource=G({loader:()=>this.goalsApiService.getGoals()}),this.goals=w({source:()=>({goals:this.goalsResource.value(),muscleGroups:this.muscleGroups(),exercises:this.exercises()}),computation:({goals:e,muscleGroups:r,exercises:i})=>[{goalType:"bodyweight",label:"Target Weight (kg)",targetValue:n(e?.find(t=>t.goalType==="bodyweight")?.targetValue??0)},{goalType:"calories",label:"Calories (cal)",targetValue:n(e?.find(t=>t.goalType==="calories")?.targetValue??0)},{goalType:"protein",label:"Protein (g)",targetValue:n(e?.find(t=>t.goalType==="protein")?.targetValue??0)},...r.map(t=>({goalType:"series-per-muscle",label:`Series per muscle for ${t}`,targetValue:n(e?.find(l=>l.goalType==="series-per-muscle"&&l.muscleGroup===t)?.targetValue??0),muscleGroup:t})),...i.map(t=>({goalType:"exercise-personal-record",label:`Personal record target for ${t.name}`,targetValue:n(e?.find(l=>l.goalType==="exercise-personal-record"&&l.exerciseId===t.exerciseId)?.targetValue??0),exerciseId:t.exerciseId}))]})}onSave(e){this.goalsApiService.saveGoal({goalType:e.goalType,targetValue:e.targetValue(),exerciseId:e.exerciseId,muscleGroup:e.muscleGroup}).subscribe({next:()=>{this.toastService.ok("Goal saved successfully!"),this.goalsResource.reload()}})}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=f({type:o,selectors:[["app-configuration-page"]],decls:9,vars:0,consts:[[1,"header-footer-padding"],[1,"container"],[1,"pb-3"],[1,"title"],[1,"subtitle"],[1,"row","g-1","pb-2"],[1,"col-10"],["type","text","inputmode","decimal","onlyNumbers","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-2"],[1,"btn","btn-secondary",3,"click"]],template:function(r,i){r&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),c(4,"Configuration"),a(),s(5,"span",4),c(6,"Change your preferences and personal targets"),a()(),y(7,R,8,2,"div",5,v),a()()),r&2&&(u(7),h(i.goals()))},dependencies:[D,P,A,M,I],encapsulation:2})}}return o})();export{K as ConfigurationPageComponent};
