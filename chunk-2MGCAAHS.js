import{D as O,E as b}from"./chunk-K7GZY5IG.js";import{Bb as d,Cb as k,Hc as i,Jb as v,Ka as h,Kb as u,Kc as D,Lb as _,Wb as M,bb as a,cc as y,ec as C,jb as f,tb as n,za as g,zb as c}from"./chunk-D6SZDTIS.js";var q=(()=>{class r{constructor(){this.value=h(0),this.maxValue=h(1),this.count=n(0),this.percent=i(()=>Math.min(100,this.value()*100/this.maxValue())),this.isSuccess=i(()=>this.percent()>=70),this.isAverage=i(()=>this.percent()>=50&&this.percent()<70),this.isDanger=i(()=>this.percent()>0&&this.percent()<50),this.size=n(100),this.strokeWidth=n(7),this.radius=i(()=>this.size()/2-this.strokeWidth()*2),this.circumference=i(()=>this.radius()*2*Math.PI),this.strokeDashOffset=n(this.circumference()),this.transition=n("none"),this.strokeDashArray=i(()=>{let t=this.circumference();return`${t} ${t}`}),this.#e=D(()=>{let t=this.percent(),s=this.circumference(),e=s-t/100*s,o=1500;setTimeout(()=>{this.transition.set(`stroke-dashoffset ${o}ms`),this.strokeDashOffset.set(e),this.animateCountUp(this.value(),o)},1e3)})}animateCountUp(t,s=2e3){let e=this.count(),o=performance.now(),p=P=>{let z=P-o,w=m=>m*(2-m),l=Math.min(z/s,1),T=w(l),V=Math.round(e+(t-e)*T);this.count.set(V),l<1?requestAnimationFrame(p):this.count.set(t)};requestAnimationFrame(p)}ngOnInit(){this.transition.set("none"),this.strokeDashOffset.set(this.circumference())}#e;static{this.\u0275fac=function(s){return new(s||r)}}static{this.\u0275cmp=f({type:r,selectors:[["app-ring"]],inputs:{value:[1,"value"],maxValue:[1,"maxValue"]},decls:5,vars:24,consts:[[1,"progress-ring",3,"ngbTooltip"],["x","50%","y","52%","fill","white",1,"progress-ring__text"],["fill","transparent","stroke","",1,"progress-ring__circle","default"],["fill","transparent",1,"progress-ring__circle"]],template:function(s,e){s&1&&(g(),v(0,"svg",0)(1,"text",1),y(2),u(),_(3,"circle",2)(4,"circle",3),u()),s&2&&(M("ngbTooltip","",e.value()," / ",e.maxValue(),""),c("height",e.size())("width",e.size()),a(2),C(" ",e.count()," "),a(),c("stroke-width",e.strokeWidth())("r",e.radius())("cx",e.size()/2)("cy",e.size()/2),a(),d("transition",e.transition()),k("success",e.isSuccess())("average",e.isAverage())("danger",e.isDanger()),c("stroke-width",e.strokeWidth())("stroke-dasharray",e.strokeDashArray())("stroke-dashoffset",e.strokeDashOffset())("r",e.radius())("cx",e.size()/2)("cy",e.size()/2))},dependencies:[b,O],styles:["svg[_ngcontent-%COMP%]:focus{outline:none}.progress-ring__text[_ngcontent-%COMP%]{font-size:24px;font-weight:700;transform-origin:50% 50%;text-anchor:middle;dominant-baseline:middle}.progress-ring__circle[_ngcontent-%COMP%]{transform:rotate(-90deg);transform-origin:50% 50%;stroke:var(--light-bg)}.success[_ngcontent-%COMP%]{stroke:#27bb65}.average[_ngcontent-%COMP%]{stroke:#fdcd00}.danger[_ngcontent-%COMP%]{stroke:#c33e37}"],changeDetection:0})}}return r})();export{q as a};
