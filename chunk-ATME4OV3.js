import{A as c,Ab as _,G as g,Gb as C,Hb as H,I as k,J as M,Ka as N,O as D,Ua as $,cd as q,dd as Q,e as T,f as S,ic as O,ja as d,ka as m,l as y,mc as h,nc as w,oc as I,rb as F,sb as v,tb as b,ub as V,ud as P,vd as A,yb as E}from"./chunk-QFD2HAQI.js";var j=["typeaheadInput"],R=["typeaheadInstance"],Z=(()=>{var u;let o=class o{constructor(){T(this,u);this.typeaheadInputHtml=w.required("typeaheadInput"),this.typeaheadInstance=w.required("typeaheadInstance"),this.disabled=h(!1),this.items=h.required(),this.control=I(),this.value=I(),this.itemSelector=h(n=>`${n??""}`),this.placeholder=h("Placeholder"),S(this,u,O(()=>{let n=this.control(),t=this.value(),e=this.typeaheadInputHtml();e&&(e.nativeElement.value=this.itemSelector()(n?.value??t??null))})),this.focus$=new y,this.click$=new y,this.search=null}ngOnInit(){this.search=U(this.focus$,this.click$,this.typeaheadInstance(),this.items,this.itemSelector())}clear(){let n=this.typeaheadInputHtml();this.control.update(t=>(t?.reset(),t)),this.value.set(null),n&&(n.nativeElement.value="")}onSelectItem(n){this.control.update(t=>(t?.patchValue(n.item),t)),this.value.set(n.item)}};u=new WeakMap,o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=$({type:o,selectors:[["app-typeahead"]],viewQuery:function(t,e){t&1&&(C(e.typeaheadInputHtml,j,5),C(e.typeaheadInstance,R,5)),t&2&&H(2)},inputs:{disabled:[1,"disabled"],items:[1,"items"],control:[1,"control"],value:[1,"value"],itemSelector:[1,"itemSelector"],placeholder:[1,"placeholder"]},outputs:{control:"controlChange",value:"valueChange"},decls:6,vars:6,consts:[["typeaheadInput","","typeaheadInstance","ngbTypeahead"],[1,"input-group"],["type","text",1,"form-control",3,"selectItem","focus","click","placeholder","ngbTypeahead","popupClass","resultFormatter","inputFormatter","disabled"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-times"]],template:function(t,e){if(t&1){let l=E();v(0,"div",1)(1,"input",2,0),_("selectItem",function(a){return d(l),m(e.onSelectItem(a))})("focus",function(){let a;return d(l),m(e.focus$.next(((a=e.control())==null?null:a.value)??null))})("click",function(){let a;return d(l),m(e.click$.next(((a=e.control())==null?null:a.value)??null))}),b(),v(4,"button",3),_("click",function(){return d(l),m(e.clear())}),V(5,"i",4),b()()}if(t&2){let l;N(),F("placeholder",e.placeholder())("ngbTypeahead",e.search)("popupClass","typeahead")("resultFormatter",e.itemSelector())("inputFormatter",e.itemSelector())("disabled",e.disabled()||((l=e.control())==null?null:l.disabled))}},dependencies:[Q,q,A,P],styles:["[_nghost-%COMP%]{display:block;width:100%}"],changeDetection:0});let s=o;return s})();function U(s,u,o,L,n){return t=>{let e=t.pipe(D()),l=s.pipe(c(i=>({type:"focus",value:n(i)}))),p=u.pipe(c(i=>({type:"click",value:n(i)}))),a=g(l,p).pipe(M(50),k(i=>!!i.length),c(i=>i.map(r=>r.type).includes("focus")&&i.map(r=>r.type).includes("click")?"":i.map(r=>r.type).includes("click")?o.isPopupOpen()?null:"":null));return g(e,a).pipe(c(i=>{let r=L();return i===null?[]:i?r.filter(f=>!!f).filter(f=>n(f).toLowerCase().includes(i.toLowerCase())):r}))}}export{Z as a};
