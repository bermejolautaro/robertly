import{a as X}from"./chunk-THUUCY7H.js";import{D as Z,g as E,h as I,i as $,j as G,k as O,l as Y,n as A,q as U}from"./chunk-S2NLS6NO.js";import{B as Q,d as q,p as H,q as K}from"./chunk-6EYGD3XX.js";import{Ac as J,Bb as R,Bc as N,Cb as u,Db as _,Eb as d,Fb as o,Gb as a,Hb as f,Ka as C,Mb as V,Nb as P,Rc as W,Ya as r,Yb as c,Zb as b,_b as B,a as M,b as h,ib as L,kc as w,lc as D,ma as v,nb as S,tb as y,ub as k,wb as F,yb as T}from"./chunk-ARLDQED4.js";var j=()=>[W,import("./chunk-SNGSQISQ.js").then(e=>e.RingComponent)];function ee(e,n){if(e&1&&(o(0,"div",4),f(1,"app-ring",5),o(2,"div",6),c(3),w(4,"titlecase"),a()()),e&2){let t=P().$implicit;r(),F("value",t.totalSeries)("maxValue",t.targetValue),r(2),B(" ",D(4,3,t.muscleGroup)," ")}}function te(e,n){e&1&&f(0,"div")}function ie(e,n){e&1&&(S(0,ee,5,5)(1,te,1,0),y(2,0,j,null,1),k(0,-1))}function re(e,n){if(e&1&&(o(0,"div",0)(1,"div",2),c(2),a(),o(3,"div",3),_(4,ie,4,0,null,null,u),a()()),e&2){let t=n.$implicit;r(2),b(t[0]),r(2),d(t[1])}}function ne(e,n){if(e&1&&_(0,re,6,1,"div",0,u),e&2){let t=P();d(t.seriesPerWeek())}}function oe(e,n){if(e&1&&(o(0,"div",4),f(1,"app-ring",5),o(2,"div",6),c(3),w(4,"titlecase"),a()()),e&2){let t=P().$implicit;r(),F("value",t.totalSeries)("maxValue",t.targetValue),r(2),B(" ",D(4,3,t.muscleGroup)," ")}}function ae(e,n){e&1&&f(0,"div")}function se(e,n){e&1&&(S(0,oe,5,5)(1,ae,1,0),y(2,0,j,null,1),k(0,-1))}function le(e,n){if(e&1&&(o(0,"div",0)(1,"div",2),c(2),a(),o(3,"div",3),_(4,se,4,0,null,null,u),a()()),e&2){let t=n.$implicit;r(2),b(t[0]),r(2),d(t[1])}}function pe(e,n){if(e&1&&_(0,le,6,1,"div",0,u),e&2){let t=P();d(t.seriesPerMonth())}}function ce(e,n){if(e&1&&(o(0,"div",4),f(1,"app-ring",5),o(2,"div",6),c(3),w(4,"titlecase"),a()()),e&2){let t=P().$implicit;r(),F("value",t.totalSeries)("maxValue",t.targetValue),r(2),B(" ",D(4,3,t.muscleGroup)," ")}}function me(e,n){e&1&&f(0,"div")}function ue(e,n){e&1&&(S(0,ce,5,5)(1,me,1,0),y(2,0,j,null,1),k(0,-1))}function _e(e,n){if(e&1&&(o(0,"div",0)(1,"div",2),c(2),a(),o(3,"div",3),_(4,ue,4,0,null,null,u),a()()),e&2){let t=n.$implicit;r(2),b(t[0]),r(2),d(t[1])}}function de(e,n){if(e&1&&_(0,_e,6,1,"div",0,u),e&2){let t=P();d(t.seriesPerYear())}}var Te=(()=>{class e{constructor(){this.exerciseLogApiService=v(X),this.exercisesApiService=v(U),this.dayjs=v(Z),this.titleCasePipe=v(W),this.defaultValues=N({source:()=>({muscleGroups:this.exercisesApiService.muscleGroups()}),computation:({muscleGroups:t})=>t.map(m=>({totalSeries:0,muscleGroup:m??"",firstDateInPeriod:"",month:0,week:0,year:0,targetValue:0}))}),this.seriesPerMuscle=q({loader:()=>this.exerciseLogApiService.getSeriesPerMuscle()}),this.period=C("week"),this.seriesPerWeek=C([]),this.seriesPerMonth=C([]),this.seriesPerYear=C([]),J(()=>{let t=this.seriesPerMuscle.value();if(t){let m=E(t.seriesPerMuscleWeekly,Y(i=>`${i.year}-${i.week.toString().padStart(2,"0")}`),G(i=>this.defaultValues().map(l=>{let p=i.find(g=>g.muscleGroup===l.muscleGroup);return p?h(M({},p),{targetValue:p?.targetValue??l.targetValue}):l})),A(),I(i=>i[0]),$(),O(i=>[`Week ${i[0].split("-")[1]} of ${i[0].split("-")[0]}`,i[1]])),s=E(t.seriesPerMuscleMonthly,Y(i=>`${i.year.toString()}-${i.month.toString().padStart(2,"0")}-01`),G(i=>this.defaultValues().map(l=>{let p=i.find(g=>g.muscleGroup===l.muscleGroup);return p?h(M({},p),{targetValue:p?.targetValue??l.targetValue}):l})),A(),I(i=>i[0]),$(),O(i=>[this.titleCasePipe.transform(this.dayjs(i[0]).format("MMM[ - ]YYYY")),i[1]])),x=E(t.seriesPerMuscleYearly,Y(i=>`${i.year}`),G(i=>this.defaultValues().map(l=>{let p=i.find(g=>g.muscleGroup===l.muscleGroup);return p?h(M({},p),{targetValue:p?.targetValue??l.targetValue}):l})),A(),I(i=>i[0]),$());this.seriesPerWeek.set(m),this.seriesPerMonth.set(s),this.seriesPerYear.set(x)}})}static{this.\u0275fac=function(m){return new(m||e)}}static{this.\u0275cmp=L({type:e,selectors:[["app-series-per-muscle-page"]],decls:10,vars:9,consts:[[1,"pb-4"],[1,"btn","me-1","badge","rounded-pill","chip",3,"click"],[1,"pb-2","text-end"],[2,"display","grid","grid-template-columns","1fr 1fr 1fr 1fr 1fr","gap","0.5rem 0.2rem"],[1,"d-flex","justify-content-center","align-items-center","flex-column"],["size","s",3,"value","maxValue"],[2,"text-align","center","font-size","12px"]],template:function(m,s){m&1&&(o(0,"div",0)(1,"button",1),V("click",function(){return s.period.set("week")}),c(2," Week "),a(),o(3,"button",1),V("click",function(){return s.period.set("month")}),c(4," Month "),a(),o(5,"button",1),V("click",function(){return s.period.set("year")}),c(6," Year "),a()(),S(7,ne,2,0)(8,pe,2,0)(9,de,2,0)),m&2&&(r(),T("active",s.period()==="week"),r(2),T("active",s.period()==="month"),r(2),T("active",s.period()==="year"),r(2),R(s.period()==="week"?7:-1),r(),R(s.period()==="month"?8:-1),r(),R(s.period()==="year"?9:-1))},dependencies:[Q,H,K],styles:[".badge.chip[_ngcontent-%COMP%]{font-size:16px;font-weight:400}.badge.chip.active[_ngcontent-%COMP%]{--bs-btn-active-border-color: transparent;--bs-btn-active-bg: var(--primary)}"],changeDetection:0})}}return e})();export{Te as SeriesPerMusclePageComponent};
