import{a as A}from"./chunk-IYNOUR4R.js";import{a as O}from"./chunk-SVYRC7CN.js";import{C as L,R as b,d as j,f as W,g as B,n as F}from"./chunk-EH3J5OSO.js";import{d as I,j as Y}from"./chunk-IROKSODG.js";import{Bb as f,Hb as P,Ib as x,Ic as v,Jb as M,Kb as t,Kc as D,Lb as a,Mb as h,a as S,b as g,cb as s,dc as c,ec as E,fc as V,kb as w,qa as u,rc as C,sc as y,ub as k}from"./chunk-TZ356O6P.js";function $(i,m){if(i&1&&(t(0,"div",5),h(1,"app-ring",6),t(2,"div",7),c(3),C(4,"titlecase"),a()()),i&2){let e=m.$implicit;s(),f("value",e.totalSeries)("maxValue",10*1),s(2),E(y(4,3,e.muscleGroup))}}function R(i,m){if(i&1&&(t(0,"div",5),h(1,"app-ring",6),t(2,"div",7),c(3),C(4,"titlecase"),a()()),i&2){let e=m.$implicit;s(),f("value",e.totalSeries)("maxValue",10*4),s(2),E(y(4,3,e.muscleGroup))}}function z(i,m){if(i&1&&(t(0,"div",5),h(1,"app-ring",6),t(2,"div",7),c(3),C(4,"titlecase"),a()()),i&2){let e=m.$implicit;s(),f("value",e.totalSeries)("maxValue",10*52),s(2),V(" ",y(4,3,e.muscleGroup)," ")}}var se=(()=>{class i{constructor(){this.document=u(I),this.dayjs=u(b),this.exerciseLogService=u(W),this.exerciseLogApiService=u(B),this.defaultValues=v(()=>this.exerciseLogService.muscleGroups().map(e=>({totalSeries:0,muscleGroup:e??"",firstDateInPeriod:"",month:0,week:0,year:0}))),this.seriesPerWeek=v(this.defaultValues),this.seriesPerMonth=v(this.defaultValues),this.seriesPerYear=v(this.defaultValues),this.selectedOptionControl=k(new F("Series Per Muscle")),this.options=k(["Series Per Muscle","Exercise","Tonnage"]),this.seriesPerMuscle=j({loader:()=>this.exerciseLogApiService.getSeriesPerMuscle()}),this.#e=D(()=>{let e=this.seriesPerMuscle.value();if(e){let o=this.dayjs().year(),p=this.dayjs().month()+1,N=this.dayjs().week(),_=e.seriesPerMuscleWeekly.filter(r=>r.week===N&&r.year===o),G=e.seriesPerMuscleMonthly.filter(r=>r.month===p&&r.year===o),T=e.seriesPerMuscleYearly.filter(r=>r.year===o);_.length&&this.seriesPerWeek.update(r=>r.map(n=>{let l=_.find(d=>d.muscleGroup===n.muscleGroup);return l?g(S({},n),{totalSeries:l?.totalSeries??0}):n})),G.length&&this.seriesPerMonth.update(r=>r.map(n=>{let l=G.find(d=>d.muscleGroup===n.muscleGroup);return l?g(S({},n),{totalSeries:l?.totalSeries??0}):n})),T&&this.seriesPerYear.update(r=>r.map(n=>{let l=T.find(d=>d.muscleGroup===n.muscleGroup);return l?g(S({},n),{totalSeries:l?.totalSeries??0}):n}))}})}#e;ngOnInit(){this.document.defaultView?.scroll({top:0,left:0,behavior:"smooth"})}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=w({type:i,selectors:[["app-stats-page"]],decls:22,vars:2,consts:[[1,"header-footer-padding"],[1,"container"],[1,"pb-4"],[3,"control","items"],[1,"d-flex","flex-wrap","justify-content-around","align-items-center"],[1,"d-flex","justify-content-center","align-items-center","flex-column"],[3,"value","maxValue"],[2,"text-align","center","font-size","12px","padding","0.5rem"]],template:function(o,p){o&1&&(t(0,"div",0)(1,"div",1)(2,"div",2),h(3,"app-dropdown",3),a(),t(4,"div",2)(5,"h6"),c(6,"Series Per Muscle - Current Week"),a(),t(7,"div",4),x(8,$,5,5,"div",5,P),a()(),t(10,"div",2)(11,"h6"),c(12,"Series Per Muscle - Current Month"),a(),t(13,"div",4),x(14,R,5,5,"div",5,P),a()(),t(16,"div")(17,"h6"),c(18,"Series Per Muscle - Current Year"),a(),t(19,"div",4),x(20,z,5,5,"div",5,P),a()()()()),o&2&&(s(3),f("control",p.selectedOptionControl())("items",p.options()),s(5),M(p.seriesPerWeek()),s(6),M(p.seriesPerMonth()),s(6),M(p.seriesPerYear()))},dependencies:[L,A,Y,O],encapsulation:2,changeDetection:0})}}return i})();export{se as StatsPageComponent};
