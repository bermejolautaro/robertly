import{a as z}from"./chunk-M36IB62C.js";import{A as U,B,I as O,g as M,h as g,i as N,j as D,k as $,l as q,m as y,o as I,q as L,s as j,t as R}from"./chunk-GHPPUNBP.js";import{j as P}from"./chunk-VKLU7C4A.js";import{Ab as x,Hb as w,Ib as V,Jb as r,Kb as o,Lb as l,Ob as v,Sb as m,Tb as h,bb as s,bc as b,cc as p,dc as k,g as _,jb as S,pa as C,pc as A,qc as T,tc as G,xa as c,ya as a,yb as F,z as f}from"./chunk-LRWZ4U2F.js";var J=(n,d)=>d.exerciseId;function K(n,d){if(n&1){let e=v();r(0,"div",9)(1,"h4",10),p(2," Edit Exercise "),o(),r(3,"button",11),m("click",function(){let i=c(e).$implicit;return a(i.dismiss())}),o()(),r(4,"div",12)(5,"form")(6,"div",13),l(7,"input",14),o(),r(8,"div",13),l(9,"app-typeahead",15),o(),r(10,"div",13),l(11,"app-typeahead",16),o()()(),r(12,"div",17)(13,"button",18),m("click",function(){let i=c(e).$implicit;return a(i.close())}),p(14," Save "),o()()}if(n&2){let e=h();s(7),x("formControl",e.exerciseForm.controls.name),s(2),x("control",e.exerciseForm.controls.muscleGroup)("items",e.exerciseApiService.muscleGroups()),s(2),x("control",e.exerciseForm.controls.type)("items",e.exerciseApiService.types()),s(2),x("disabled",e.exerciseForm.invalid||e.exerciseForm.pristine)}}function Q(n,d){if(n&1){let e=v();r(0,"li",19),m("click",function(){let i=c(e).$implicit,u=h(),E=b(1);return a(u.open(E,i))}),r(1,"span"),p(2),A(3,"titlecase"),o(),r(4,"button",20),m("click",function(i){let u=c(e).$implicit;return h().deleteExercise(u),a(i.stopPropagation())}),l(5,"i",21),o()()}if(n&2){let e=d.$implicit;s(2),k(T(3,1,e.name))}}function W(n,d){n&1&&(r(0,"div",8)(1,"div",22)(2,"span",23),p(3,"Loading..."),o()()())}var ae=(()=>{class n{constructor(){this.modalService=C(U),this.exerciseApiService=C(O),this.exerciseForm=new $({name:new y("",[g.required]),muscleGroup:new y("",[g.required]),type:new y("",[g.required])}),this.isUpdate=!1,this.exerciseForm.controls.name.valueChanges.subscribe(e=>{this.exerciseForm.controls.name.patchValue(e?.toLowerCase()??"",{emitEvent:!1})})}ngOnInit(){return _(this,null,function*(){yield this.exerciseApiService.fetchExercises()})}open(e,t){this.exerciseForm.reset(),t&&this.exerciseForm.patchValue({name:t.name,muscleGroup:t.muscleGroup,type:t.type}),this.modalService.open(e,{centered:!0}).result.then(()=>_(this,null,function*(){if(this.isUpdate=!!t,t){let i={id:t.exerciseId,name:this.exerciseForm.value.name.toLowerCase(),muscleGroup:this.exerciseForm.value.muscleGroup,type:this.exerciseForm.value.type};yield f(this.exerciseApiService.updateExercise(i))}else{let i={name:this.exerciseForm.value.name.toLowerCase(),muscleGroup:this.exerciseForm.value.muscleGroup,type:this.exerciseForm.value.type};yield f(this.exerciseApiService.createExercise(i))}yield this.exerciseApiService.fetchExercises()}),()=>{})}deleteExercise(e){return _(this,null,function*(){yield f(this.exerciseApiService.deleteExercise(e.exerciseId)),yield this.exerciseApiService.fetchExercises()})}close(e){e.close()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=S({type:n,selectors:[["app-exercises-page"]],decls:12,vars:1,consts:[["content",""],[1,"container","header-footer-padding"],[1,"d-flex","justify-content-end","mb-3"],["type","button",1,"btn","btn-primary"],[1,"fa","fa-plus","me-2"],[3,"click"],[1,"list-group"],[1,"list-group-item","d-flex","align-items-center"],[1,"position-absolute","top-50","start-50","translate-middle"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],["type","text","placeholder","Name",1,"form-control",3,"formControl"],["placeholder","Muscle Group",3,"control","items"],["placeholder","Type",3,"control","items"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"list-group-item","d-flex","align-items-center",3,"click"],["type","button",1,"btn","btn-danger",2,"margin-left","auto","padding","0.075rem 0.35rem",3,"click"],[1,"fa","fa-trash"],["role","status",1,".robertly-spinner","spinner-border","text-primary"],[1,"visually-hidden"]],template:function(t,i){if(t&1){let u=v();F(0,K,15,6,"ng-template",null,0,G),r(2,"div",1)(3,"div",2)(4,"button",3),l(5,"i",4),r(6,"span",5),m("click",function(){c(u);let H=b(1);return a(i.open(H,null))}),p(7,"Add Exercise"),o()()(),r(8,"ul",6),w(9,Q,6,3,"li",7,J,!1,W,4,0,"div",8),o()()}t&2&&(s(9),V(i.exerciseApiService.exercises()))},dependencies:[P,B,j,I,M,N,D,q,R,L,z],encapsulation:2,changeDetection:0})}}return n})();export{ae as ExercisesPageComponent};
