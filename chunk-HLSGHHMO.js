import{a as z}from"./chunk-VSMLG2GQ.js";import{a as R}from"./chunk-SOV2WECP.js";import{C as $,R as J,d as L,f as O,g as A,n as N}from"./chunk-C3W2BF6O.js";import{d as B,j as F}from"./chunk-KWBPPEPJ.js";import{Bb as f,Db as P,Gb as x,Hb as y,Hc as h,Ib as k,Jb as M,Jc as W,Kb as n,Lb as a,Mb as v,Tb as b,Ub as T,a as g,b as S,cb as i,dc as d,fc as w,kb as Y,qa as u,qc as E,rc as G,ub as C,zb as j}from"./chunk-W53POS3V.js";function U(t,l){if(t&1&&(n(0,"div",6),v(1,"app-ring",7),n(2,"div",8),d(3),E(4,"titlecase"),a()()),t&2){let e=l.$implicit;i(),f("value",e.totalSeries)("maxValue",10*1),i(2),w(" ",G(4,3,e.muscleGroup)," ")}}function q(t,l){if(t&1&&(n(0,"div",5),k(1,U,5,5,"div",6,y),a()),t&2){let e=T();i(),M(e.seriesPerWeek())}}function H(t,l){if(t&1&&(n(0,"div",6),v(1,"app-ring",7),n(2,"div",8),d(3),E(4,"titlecase"),a()()),t&2){let e=l.$implicit;i(),f("value",e.totalSeries)("maxValue",10*4),i(2),w(" ",G(4,3,e.muscleGroup)," ")}}function K(t,l){if(t&1&&(n(0,"div",5),k(1,H,5,5,"div",6,y),a()),t&2){let e=T();i(),M(e.seriesPerMonth())}}function Q(t,l){if(t&1&&(n(0,"div",6),v(1,"app-ring",7),n(2,"div",8),d(3),E(4,"titlecase"),a()()),t&2){let e=l.$implicit;i(),f("value",e.totalSeries)("maxValue",10*52),i(2),w(" ",G(4,3,e.muscleGroup)," ")}}function X(t,l){if(t&1&&(n(0,"div",5),k(1,Q,5,5,"div",6,y),a()),t&2){let e=T();i(),M(e.seriesPerYear())}}var me=(()=>{class t{constructor(){this.document=u(B),this.dayjs=u(J),this.exerciseLogService=u(O),this.exerciseLogApiService=u(A),this.defaultValues=h(()=>this.exerciseLogService.muscleGroups().map(e=>({totalSeries:0,muscleGroup:e??"",firstDateInPeriod:"",month:0,week:0,year:0}))),this.period=C("year"),this.seriesPerWeek=h(this.defaultValues),this.seriesPerMonth=h(this.defaultValues),this.seriesPerYear=h(this.defaultValues),this.selectedOptionControl=C(new N("Series Per Muscle")),this.options=C(["Series Per Muscle","Exercise","Tonnage"]),this.seriesPerMuscle=L({loader:()=>this.exerciseLogApiService.getSeriesPerMuscle()}),this.#e=W(()=>{let e=this.seriesPerMuscle.value();if(e){let c=this.dayjs().year(),r=this.dayjs().month()+1,_=this.dayjs().week(),V=e.seriesPerMuscleWeekly.filter(o=>o.week===_&&o.year===c),D=e.seriesPerMuscleMonthly.filter(o=>o.month===r&&o.year===c),I=e.seriesPerMuscleYearly.filter(o=>o.year===c);V.length&&this.seriesPerWeek.update(o=>o.map(s=>{let p=V.find(m=>m.muscleGroup===s.muscleGroup);return p?S(g({},s),{totalSeries:p?.totalSeries??0}):s})),D.length&&this.seriesPerMonth.update(o=>o.map(s=>{let p=D.find(m=>m.muscleGroup===s.muscleGroup);return p?S(g({},s),{totalSeries:p?.totalSeries??0}):s})),I&&this.seriesPerYear.update(o=>o.map(s=>{let p=I.find(m=>m.muscleGroup===s.muscleGroup);return p?S(g({},s),{totalSeries:p?.totalSeries??0}):s}))}})}#e;ngOnInit(){this.document.defaultView?.scroll({top:0,left:0,behavior:"smooth"})}static{this.\u0275fac=function(c){return new(c||t)}}static{this.\u0275cmp=Y({type:t,selectors:[["app-stats-page"]],decls:14,vars:12,consts:[[1,"header-footer-padding"],[1,"container"],[1,"pb-4"],[3,"control","items","showClear"],[1,"btn","me-1","badge","rounded-pill","chip",3,"click"],[1,"d-flex","flex-wrap","justify-content-around","align-items-center"],[1,"d-flex","justify-content-center","align-items-center","flex-column"],[3,"value","maxValue"],[2,"text-align","center","font-size","12px","padding","0.5rem"]],template:function(c,r){c&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),v(3,"app-dropdown",3),a(),n(4,"div",2)(5,"button",4),b("click",function(){return r.period.set("week")}),d(6," Week "),a(),n(7,"button",4),b("click",function(){return r.period.set("month")}),d(8," Month "),a(),n(9,"button",4),b("click",function(){return r.period.set("year")}),d(10," Year "),a()(),j(11,q,3,0,"div",5)(12,K,3,0,"div",5)(13,X,3,0,"div",5),a()()),c&2&&(i(3),f("control",r.selectedOptionControl())("items",r.options())("showClear",!1),i(2),P("active",r.period()==="week"),i(2),P("active",r.period()==="month"),i(2),P("active",r.period()==="year"),i(2),x(r.period()==="week"?11:-1),i(),x(r.period()==="month"?12:-1),i(),x(r.period()==="year"?13:-1))},dependencies:[$,z,F,R],styles:[".badge.chip[_ngcontent-%COMP%]{font-size:16px;font-weight:400}.badge.chip.active[_ngcontent-%COMP%]{--bs-btn-active-border-color: transparent;--bs-btn-active-bg: var(--primary) }"],changeDetection:0})}}return t})();export{me as StatsPageComponent};
