import{a as O}from"./chunk-5LVRRYZR.js";import{m as B}from"./chunk-OKR7ACI7.js";import{B as R,C as U,e as P,f as h,g as M,h as N,i as D,j as $,k as g,m as q,o as I,q as L,r as j}from"./chunk-JY52K3I6.js";import{j as G}from"./chunk-HKPS3N5F.js";import{Ab as x,Hb as F,Ib as w,Jb as r,Kb as o,Lb as l,Ob as f,Sb as m,Tb as v,ab as s,bc as C,cc as p,dc as V,ma as E,mb as b,pc as k,qc as A,rb as S,tc as T,ua as c,va as a,x as _}from"./chunk-D2TTQ72P.js";var H=(n,d)=>d.exerciseId;function J(n,d){if(n&1){let e=f();r(0,"div",9)(1,"h4",10),p(2," Edit Exercise "),o(),r(3,"button",11),m("click",function(){let i=c(e).$implicit;return a(i.dismiss())}),o()(),r(4,"div",12)(5,"form")(6,"div",13),l(7,"input",14),o(),r(8,"div",13),l(9,"app-typeahead",15),o(),r(10,"div",13),l(11,"app-typeahead",16),o()()(),r(12,"div",17)(13,"button",18),m("click",function(){let i=c(e).$implicit;return a(i.close())}),p(14," Save "),o()()}if(n&2){let e=v();s(7),x("formControl",e.exerciseForm.controls.name),s(2),x("control",e.exerciseForm.controls.muscleGroup)("items",e.exerciseApiService.muscleGroups()),s(2),x("control",e.exerciseForm.controls.type)("items",e.exerciseApiService.types()),s(2),x("disabled",e.exerciseForm.invalid||e.exerciseForm.pristine)}}function K(n,d){if(n&1){let e=f();r(0,"li",19),m("click",function(){let i=c(e).$implicit,u=v(),y=C(1);return a(u.open(y,i))}),r(1,"span"),p(2),k(3,"titlecase"),o(),r(4,"button",20),m("click",function(i){let u=c(e).$implicit;return v().deleteExercise(u),a(i.stopPropagation())}),l(5,"i",21),o()()}if(n&2){let e=d.$implicit;s(2),V(A(3,1,e.name))}}function Q(n,d){n&1&&(r(0,"div",8)(1,"div",22)(2,"span",23),p(3,"Loading..."),o()()())}var ce=(()=>{class n{constructor(){this.modalService=E(R),this.exerciseApiService=E(B),this.exerciseForm=new D({name:new g("",[h.required]),muscleGroup:new g("",[h.required]),type:new g("",[h.required])}),this.isUpdate=!1,this.exerciseForm.controls.name.valueChanges.subscribe(e=>{this.exerciseForm.controls.name.patchValue(e?.toLowerCase()??"",{emitEvent:!1})})}async ngOnInit(){await this.exerciseApiService.fetchExercises()}open(e,t){this.exerciseForm.reset(),t&&this.exerciseForm.patchValue({name:t.name,muscleGroup:t.muscleGroup,type:t.type}),this.modalService.open(e,{centered:!0}).result.then(async()=>{if(this.isUpdate=!!t,t){let i={id:t.exerciseId,name:this.exerciseForm.value.name.toLowerCase(),muscleGroup:this.exerciseForm.value.muscleGroup,type:this.exerciseForm.value.type};await _(this.exerciseApiService.updateExercise(i))}else{let i={name:this.exerciseForm.value.name.toLowerCase(),muscleGroup:this.exerciseForm.value.muscleGroup,type:this.exerciseForm.value.type};await _(this.exerciseApiService.createExercise(i))}await this.exerciseApiService.fetchExercises()},()=>{})}async deleteExercise(e){await _(this.exerciseApiService.deleteExercise(e.exerciseId)),await this.exerciseApiService.fetchExercises()}close(e){e.close()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=b({type:n,selectors:[["app-exercises-page"]],decls:12,vars:1,consts:[["content",""],[1,"container","header-footer-padding"],[1,"d-flex","justify-content-end","mb-3"],["type","button",1,"btn","btn-primary"],[1,"fa","fa-plus","me-2"],[3,"click"],[1,"list-group"],[1,"list-group-item","d-flex","align-items-center"],[1,"position-absolute","top-50","start-50","translate-middle"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],["type","text","placeholder","Name",1,"form-control",3,"formControl"],["placeholder","Muscle Group",3,"control","items"],["placeholder","Type",3,"control","items"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"list-group-item","d-flex","align-items-center",3,"click"],["type","button",1,"btn","btn-danger",2,"margin-left","auto","padding","0.075rem 0.35rem",3,"click"],[1,"fa","fa-trash"],["role","status",1,"robertly-spinner","spinner-border","text-primary"],[1,"visually-hidden"]],template:function(t,i){if(t&1){let u=f();S(0,J,15,6,"ng-template",null,0,T),r(2,"div",1)(3,"div",2)(4,"button",3),l(5,"i",4),r(6,"span",5),m("click",function(){c(u);let z=C(1);return a(i.open(z,null))}),p(7,"Add Exercise"),o()()(),r(8,"ul",6),F(9,K,6,3,"li",7,H,!1,Q,4,0,"div",8),o()()}t&2&&(s(9),w(i.exerciseApiService.exercises()))},dependencies:[G,U,L,q,P,M,N,$,j,I,O],encapsulation:2,changeDetection:0})}}return n})();export{ce as ExercisesPageComponent};
